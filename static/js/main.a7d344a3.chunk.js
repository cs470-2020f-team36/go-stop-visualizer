(this["webpackJsonpgo-stop-visualizer"]=this["webpackJsonpgo-stop-visualizer"]||[]).push([[0],{100:function(e,t,a){},127:function(e,t){},173:function(e,t,a){},180:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a(2),c=a.n(r),s=a(24),i=a.n(s),o=(a(100),a(7)),l=a(3),d=a.n(l),u=a(5),h=a(17),m=a(55),b=a(10),j=a(14),p=a(25),x=a.n(p),f=function(e){return{updateClientId:function(e,t){return localStorage.setItem("clientId",t),{clientId:t}},updateRooms:function(e,t){return{rooms:t}},updateRoomId:function(e,t){return{roomId:t}},updateGame:function(e,t){return{game:t}}}},k=a(78),g=a.n(k)()("https://cs470-go-stop.herokuapp.com/");function O(e,t){return v.apply(this,arguments)}function v(){return(v=Object(u.a)(d.a.mark((function e(t,a){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:g.emit(t,a);case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function w(e){return y.apply(this,arguments)}function y(){return(y=Object(u.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e){g.once(t,(function(t){e(t)}))})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function N(e,t){g.on(e,t)}function I(e,t){g.off(e,t)}var J=a(26),R=a(15),C={sm:"text-xl",base:"text-2xl",lg:"text-4xl"},A=function(e){var t,a=e.size,r=void 0===a?"base":a,c=e.dark,s=void 0!==c&&c,i=Object(R.a)(e,["size","dark"]);return Object(n.jsx)("button",Object(o.a)(Object(o.a)({},i),{},{className:"flex items-center justify-center p-3 rounded-full\n        disabled:bg-transparent disabled:opacity-50 disabled:cursor-not-allowed \n        focus:outline-none focus:shadow-outline ".concat(C[r]," ").concat(null!==(t=e.className)&&void 0!==t?t:""," ").concat(s?"text-white bg-opacity-15 hover:bg-opacity-35 bg-white":"bg-opacity-25 hover:bg-opacity-50 text-gray-800 bg-gray-400")}))},S=a(22),W=a(87),D=function(e){var t=e.children;return Object(n.jsx)("div",{className:"w-full bg-gray-200 min-h-full overflow-x-hidden",children:Object(n.jsxs)("div",{className:"max-w-4xl mx-auto text-gray-900 h-full",children:[t," "]})})},B=function(e){var t=e.children,a=e.style;return Object(n.jsx)("header",{className:"p-4",style:a,children:t})},F={Wrapper:function(e){var t=e.children;return Object(n.jsx)("div",{className:"overflow-x-auto bg-white rounded-lg shadow max-w-4xl m-auto box-content mx-4",children:Object(n.jsx)("table",{className:"border-collapse table-auto w-full whitespace-no-wrap bg-white table-striped relative",children:t})})},Head:function(e){var t=e.children;return Object(n.jsx)("thead",{children:t})},Body:function(e){var t=e.children;return Object(n.jsx)("tbody",{children:t})},Row:function(e){var t,a=e.children,r=Object(R.a)(e,["children"]);return Object(n.jsx)("tr",Object(o.a)(Object(o.a)({},r),{},{className:"text-left ".concat(null!==(t=r.className)&&void 0!==t?t:""),children:a}))},Data:function(e){var t,a=e.children,r=Object(R.a)(e,["children"]);return Object(n.jsx)("td",Object(o.a)(Object(o.a)({},r),{},{className:"border-dashed border-t border-gray-200 ".concat(null!==(t=r.className)&&void 0!==t?t:""),children:a}))},Header:function(e){var t,a=e.children,r=Object(R.a)(e,["children"]);return Object(n.jsx)("th",Object(o.a)(Object(o.a)({},r),{},{className:"py-2 px-3 sticky top-0 border-b text-gray-700 border-gray-200 bg-gray-100 ".concat(null!==(t=r.className)&&void 0!==t?t:""),children:a}))}},T=a(13),z=a(59),_=a(58),E=a(85),H=a(181),M=a(84),L=a(11),G=function(e,t){var a=e.history,n=e.clientId,r=e.roomId,c=e.rooms,s=e.updateRoomId,i=e.addToast;return Object(u.a)(d.a.mark((function e(){var o,l,u,h,m,b,j;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!r||!(null===c||void 0===c||null===(o=c.find((function(e){return e.id===r})))||void 0===o?void 0:o.gameStarted)){e.next=4;break}return a.push("/rooms/".concat(r)),i("There is a game going on.",{appearance:"info",autoDismiss:!0}),e.abrupt("return");case 4:if(n){e.next=6;break}return e.abrupt("return");case 6:return O("my room",{client:n}),e.next=9,w("my room response");case 9:(l=e.sent).success?(s(null!==(u=null===(h=l.result)||void 0===h?void 0:h.id)&&void 0!==u?u:null),!(null===(m=l.result)||void 0===m?void 0:m.id)||!(null===(b=l.result)||void 0===b?void 0:b.gameStarted)&&t||a.push("/rooms/".concat(null===(j=l.result)||void 0===j?void 0:j.id))):i(l.error,{appearance:"info",autoDismiss:!0});case 11:case"end":return e.stop()}}),e)})))};function P(e){return"/images/cards/".concat(e.startsWith("?")?"hidden":e.startsWith("*")?"bomb":e.startsWith("+")?"bonus".concat(e[1]):e,".png")}function U(e){if(e.startsWith("B"))return"".concat(parseInt(e.substring(1)),"\uc6d4 \uad11");if(e.startsWith("A"))return"".concat(parseInt(e.substring(1)),"\uc6d4 \uc5f4\ub057");if(e.startsWith("R")){var t=parseInt(e.substring(1)),a=[1,2,3].includes(t)?"\ud64d":[4,5,7].includes(t)?"\ucd08":[6,9,10].includes(t)?"\uccad":null;return"".concat(t,"\uc6d4 \ub760").concat(a?" (".concat(a,"\ub2e8)"):"")}if(e.startsWith("J")){var n=parseInt(e.substring(1,3)),r=parseInt(e.substring(3)),c=2===r||12===n?2:1;return"".concat(n,"\uc6d4 ").concat(2===c?"\uc30d":"","\ud53c").concat(2===c?"":" (".concat(r,")"))}if(e.startsWith("+")){var s=parseInt(e.substring(1));return"\ubcf4\ub108\uc2a4 ".concat(2===s?"\uc30d":"\uc4f0\ub9ac","\ud53c")}if(e.startsWith("*")){var i=parseInt(e.substring(1));return"\ud3ed\ud0c4 (".concat(i,")")}return"\uc228\uaca8\uc9c4 \ud328"}function Y(e){return["January","February","March","April","May","June","July","August","September","October","November","December"][e-1]}var K=[{kind:"throw",card:"B01"},{kind:"throw",card:"R01"},{kind:"throw",card:"J010"},{kind:"throw",card:"J011"},{kind:"throw",card:"A02"},{kind:"throw",card:"R02"},{kind:"throw",card:"J020"},{kind:"throw",card:"J021"},{kind:"throw",card:"B03"},{kind:"throw",card:"R03"},{kind:"throw",card:"J030"},{kind:"throw",card:"J031"},{kind:"throw",card:"A04"},{kind:"throw",card:"R04"},{kind:"throw",card:"J040"},{kind:"throw",card:"J041"},{kind:"throw",card:"A05"},{kind:"throw",card:"R05"},{kind:"throw",card:"J050"},{kind:"throw",card:"J051"},{kind:"throw",card:"A06"},{kind:"throw",card:"R06"},{kind:"throw",card:"J060"},{kind:"throw",card:"J061"},{kind:"throw",card:"A07"},{kind:"throw",card:"R07"},{kind:"throw",card:"J070"},{kind:"throw",card:"J071"},{kind:"throw",card:"B08"},{kind:"throw",card:"A08"},{kind:"throw",card:"J080"},{kind:"throw",card:"J081"},{kind:"throw",card:"A09"},{kind:"throw",card:"R09"},{kind:"throw",card:"J090"},{kind:"throw",card:"J091"},{kind:"throw",card:"A10"},{kind:"throw",card:"R10"},{kind:"throw",card:"J100"},{kind:"throw",card:"J101"},{kind:"throw",card:"B11"},{kind:"throw",card:"J110"},{kind:"throw",card:"J111"},{kind:"throw",card:"J112"},{kind:"throw",card:"B12"},{kind:"throw",card:"A12"},{kind:"throw",card:"R12"},{kind:"throw",card:"J120"},{kind:"throw",card:"+2"},{kind:"throw",card:"+3"},{kind:"throw bomb"},{kind:"bomb",month:1},{kind:"bomb",month:2},{kind:"bomb",month:3},{kind:"bomb",month:4},{kind:"bomb",month:5},{kind:"bomb",month:6},{kind:"bomb",month:7},{kind:"bomb",month:8},{kind:"bomb",month:9},{kind:"bomb",month:10},{kind:"bomb",month:11},{kind:"bomb",month:12},{kind:"shakable",card:"B01"},{kind:"shakable",card:"R01"},{kind:"shakable",card:"J010"},{kind:"shakable",card:"J011"},{kind:"shakable",card:"A02"},{kind:"shakable",card:"R02"},{kind:"shakable",card:"J020"},{kind:"shakable",card:"J021"},{kind:"shakable",card:"B03"},{kind:"shakable",card:"R03"},{kind:"shakable",card:"J030"},{kind:"shakable",card:"J031"},{kind:"shakable",card:"A04"},{kind:"shakable",card:"R04"},{kind:"shakable",card:"J040"},{kind:"shakable",card:"J041"},{kind:"shakable",card:"A05"},{kind:"shakable",card:"R05"},{kind:"shakable",card:"J050"},{kind:"shakable",card:"J051"},{kind:"shakable",card:"A06"},{kind:"shakable",card:"R06"},{kind:"shakable",card:"J060"},{kind:"shakable",card:"J061"},{kind:"shakable",card:"A07"},{kind:"shakable",card:"R07"},{kind:"shakable",card:"J070"},{kind:"shakable",card:"J071"},{kind:"shakable",card:"B08"},{kind:"shakable",card:"A08"},{kind:"shakable",card:"J080"},{kind:"shakable",card:"J081"},{kind:"shakable",card:"A09"},{kind:"shakable",card:"R09"},{kind:"shakable",card:"J090"},{kind:"shakable",card:"J091"},{kind:"shakable",card:"A10"},{kind:"shakable",card:"R10"},{kind:"shakable",card:"J100"},{kind:"shakable",card:"J101"},{kind:"shakable",card:"B11"},{kind:"shakable",card:"J110"},{kind:"shakable",card:"J111"},{kind:"shakable",card:"J112"},{kind:"shakable",card:"B12"},{kind:"shakable",card:"A12"},{kind:"shakable",card:"R12"},{kind:"shakable",card:"J120"},{kind:"shaking",option:!1},{kind:"shaking",option:!0},{kind:"select match",match:"B01"},{kind:"select match",match:"R01"},{kind:"select match",match:"J010"},{kind:"select match",match:"J011"},{kind:"select match",match:"A02"},{kind:"select match",match:"R02"},{kind:"select match",match:"J020"},{kind:"select match",match:"J021"},{kind:"select match",match:"B03"},{kind:"select match",match:"R03"},{kind:"select match",match:"J030"},{kind:"select match",match:"J031"},{kind:"select match",match:"A04"},{kind:"select match",match:"R04"},{kind:"select match",match:"J040"},{kind:"select match",match:"J041"},{kind:"select match",match:"A05"},{kind:"select match",match:"R05"},{kind:"select match",match:"J050"},{kind:"select match",match:"J051"},{kind:"select match",match:"A06"},{kind:"select match",match:"R06"},{kind:"select match",match:"J060"},{kind:"select match",match:"J061"},{kind:"select match",match:"A07"},{kind:"select match",match:"R07"},{kind:"select match",match:"J070"},{kind:"select match",match:"J071"},{kind:"select match",match:"B08"},{kind:"select match",match:"A08"},{kind:"select match",match:"J080"},{kind:"select match",match:"J081"},{kind:"select match",match:"A09"},{kind:"select match",match:"R09"},{kind:"select match",match:"J090"},{kind:"select match",match:"J091"},{kind:"select match",match:"A10"},{kind:"select match",match:"R10"},{kind:"select match",match:"J100"},{kind:"select match",match:"J101"},{kind:"select match",match:"B11"},{kind:"select match",match:"J110"},{kind:"select match",match:"J111"},{kind:"select match",match:"J112"},{kind:"select match",match:"B12"},{kind:"select match",match:"A12"},{kind:"select match",match:"R12"},{kind:"select match",match:"J120"},{kind:"four of a month",option:!1},{kind:"four of a month",option:!0},{kind:"move animal 9",option:!1},{kind:"move animal 9",option:!0},{kind:"go",option:!1},{kind:"go",option:!0}];function Q(e,t,a){if(a)return e.board.hands[t];var n=e.board.hands[t].length,r=e.board.hands[t].filter((function(a){return a.startsWith("*")||e.state.shaking_histories[t].flat().includes(a)}));return[].concat(Object(h.a)(r),Object(h.a)(Array(n-r.length).fill("?")))}function V(e){switch(e.kind){case"throw":return"".concat(U(e.card)," \ub0b4\uae30");case"throw bomb":return"\ud3ed\ud0c4 \ud328 \ub0b4\uae30";case"bomb":return"".concat(e.month,"\uc6d4 \ud3ed\ud0c4 \ub0b4\uae30");case"shakable":return"".concat(U(e.card)," \ub0b4\uae30");case"shaking":return e.option?"\ud754\ub4e4\uae30":"\ud754\ub4e4\uc9c0 \uc54a\uae30";case"select match":return"".concat(U(e.match)," \uac00\uc838\uc624\uae30");case"four of a month":return e.option?"\ucd1d\ud1b5\uc73c\ub85c \ub05d\ub0b4\uae30":"\ucd1d\ud1b5\uc73c\ub85c \ub05d\ub0b4\uc9c0 \uc54a\uae30";case"move animal 9":return e.option?"9\uc6d4 \uc5f4\ub057 \uc30d\ud53c\ub85c \uc4f0\uae30":"9\uc6d4 \uc5f4\ub057 \uadf8\ub300\ub85c \uc5f4\ub057\uc73c\ub85c \uc4f0\uae30";case"go":return e.option?"\uace0":"\uc2a4\ud1b1"}}function X(e){switch(e.kind){case"throw":return"throw ".concat(U(e.card));case"throw bomb":return"throw a bomb card";case"bomb":return"throw a bomb of ".concat(Y(e.month));case"shakable":return"throw ".concat(U(e.card));case"shaking":return e.option?"shake":"don't shake";case"select match":return"select ".concat(U(e.match));case"four of a month":return e.option?"end the game by a four-of-a-month":"don't end the game by a four-of-a-month";case"move animal 9":return e.option?"use the animal of September as a double junk":"use the animal of September as an animal";case"go":return e.option?"go":"stop"}}function q(e,t){for(var a=e.map((function(e,a){return[("ko"===t?V:X)(K[a]),e]})).filter((function(e){return 0!==Object(T.a)(e,2)[1]})).sort((function(e,t){return t[1]-e[1]})),n=function(e){return"".concat(Math.round(1e4*e)/1e4).padEnd(6,"0")},r=[],c=0;c<a.length;c++)c>0&&a[c-1][1]===a[c][1]?r.push([r[c-1][0],a[c][0],n(a[c][1])]):r.push([c+1,a[c][0],n(a[c][1])]);return r}function Z(e){return e.charAt(0).toUpperCase()+e.slice(1)}a(173);var $=function(e){var t,a=e.card,r=void 0===a?"?":a,c=e.anchorBottom,s=void 0!==c&&c,i=e.hoverEnabled,l=void 0===i||i,d=e.title,u=(e.children,Object(R.a)(e,["card","anchorBottom","hoverEnabled","title","children"]));return Object(n.jsx)("button",Object(o.a)(Object(o.a)({},u),{},{className:"".concat(l?"card-button":""," ").concat(null!==(t=e.className)&&void 0!==t?t:""," ").concat(s?"anchor-bottom":""," ").concat(l?"":"cursor-default"),children:Object(n.jsx)("img",{title:d,alt:d,src:P(r),className:"w-full h-full",style:{borderRadius:4}})}))},ee={xs:"text-xs",sm:"text-sm",base:"text-base",lg:"text-lg",xl:"text-xl","2xl":"text-2xl"},te=function(e){var t,a=e.size,r=void 0===a?"base":a,c=e.dark,s=void 0!==c&&c,i=Object(R.a)(e,["size","dark"]);return Object(n.jsx)("button",Object(o.a)(Object(o.a)({},i),{},{className:"flex items-center justify-center px-5 py-3 rounded-full\n        disabled:bg-transparent disabled:opacity-50 disabled:cursor-not-allowed \n        focus:outline-none focus:shadow-outline ".concat(ee[r]," ").concat(null!==(t=e.className)&&void 0!==t?t:""," ").concat(s?"text-white bg-opacity-15 hover:bg-opacity-35 bg-white":"bg-opacity-25 hover:bg-opacity-50 text-gray-800 bg-gray-400")}))},ae=function(e){var t,a=e.game,r=e.player,c=e.clientId,s=e.roomId,i=e.updateGame,o=e.history,l=!!c&&a.players.includes(c),m=Object(L.useToasts)().addToast,b=Object(H.a)().t;return Object(n.jsx)("div",{className:"w-full h-full flex place-items-center fixed z-10 top-0 left-0",style:{backgroundColor:"rgba(0, 0, 0, 0.45)"},children:Object(n.jsxs)("div",{className:"p-8 bg-white rounded-2xl w-2/3 text-center m-auto",children:[Object(n.jsx)("h2",{className:"font-black text-3xl text-gray-800 mb-3",children:null===a.state.winner?"\ud83e\udd14 ".concat(Z(b("push back"))):a.state.winner===r?"\ud83c\udf1f ".concat(Z(b("victory")),"!"):1-a.state.winner===r?"\ud83d\ude25 ".concat(Z(b("defeat")),"..."):"\ud83c\udfc6 ".concat((t=a.players[a.state.winner],"Wyi2TSh8fW3jioGOkjpiNHHKImPntB"===t?"AlphaGoStop":t)).concat(b("'s")," ").concat(Z(b("victory")),"!")}),Object(n.jsx)("p",{children:Object(n.jsx)("span",{className:"text-xl text-gray-800",children:null===a.state.winner?null:Object(n.jsxs)(n.Fragment,{children:["".concat(Z(b("total"))," "),Object(n.jsx)("span",{className:"font-bold",children:a.state.scores[a.state.winner]}),"".concat(b("points"))]})})}),Object(n.jsx)("p",{children:Object(n.jsx)("span",{className:"text-md text-gray-800",children:null===a.state.winner?null:[{kind:"go-add",arg:a.state.go_histories[a.state.winner].length}].concat(Object(h.a)(a.state.score_factors[a.state.winner])).map((function(e){return"go-add"===e.kind?0===e.arg?null:"".concat(Z(b("go"))," ").concat(e.arg).concat(b("points")):"go"===e.kind?e.arg<=2?null:"".concat(Z(b("go"))," ").concat(Math.pow(2,e.arg-2)).concat(b("multiples")):"bright"===e.kind?0===e.arg?null:"".concat(Z(b("brights"))," ").concat(e.arg).concat(b("points")):"animal"===e.kind?e.arg<5?null:"".concat(Z(b("animals"))," ").concat(e.arg-4).concat(b("points")):"ribbon"===e.kind?e.arg<5?null:"".concat(Z(b("ribbons"))," ").concat(e.arg-4).concat(b("points")):"junk"===e.kind?e.arg<10?null:"".concat(Z(b("junks"))," ").concat(e.arg-9).concat(b("points")):"five birds"===e.kind?"".concat(Z(b("five birds"))," 5").concat(b("points")):"red ribbons"===e.kind?"".concat(Z(b("red ribbons"))," 3").concat(b("points")):"blue ribbons"===e.kind?"".concat(Z(b("blue ribbons"))," 3").concat(b("points")):"plant ribbons"===e.kind?"".concat(Z(b("plant ribbons"))," 3").concat(b("points")):"shaking"===e.kind?0===e.arg?null:"".concat(Z(b("shaking"))," ").concat(Math.pow(2,e.arg)).concat(b("multiples")):"bright penalty"===e.kind?"".concat(Z(b("bright penalty"))," 2").concat(b("multiples")):"animal penalty"===e.kind?"".concat(Z(b("animal penalty"))," 2").concat(b("multiples")):"junk penalty"===e.kind?"".concat(Z(b("junk penalty"))," 2").concat(b("multiples")):"go penalty"===e.kind?"".concat(Z(b("go penalty"))," 2").concat(b("multiples")):"four of a month"===e.kind?"".concat(Z(b("four of a month"))," 10").concat(b("points")):"".concat(Z(b("three stackings"))," 10").concat(b("points"))})).filter((function(e){return null!==e})).join(", ")})}),Object(n.jsx)("div",{children:l?Object(n.jsxs)("div",{className:"flex",children:[Object(n.jsx)(te,{className:"m-auto mt-4",onClick:Object(u.a)(d.a.mark((function e(){var t,a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(g){e.next=2;break}return e.abrupt("return");case 2:if(c){e.next=4;break}return e.abrupt("return");case 4:return i(null),O("end game",{client:c}),e.next=8,w("end game response");case 8:if((t=e.sent).success){e.next=12;break}return m(t.error,{appearance:"error",autoDismiss:!0}),e.abrupt("return");case 12:return O("start game",{client:c}),e.next=15,w("start game response");case 15:(a=e.sent).success||m(a.error,{appearance:"error",autoDismiss:!0});case 17:case"end":return e.stop()}}),e)}))),children:Z(b("new games"))}),Object(n.jsx)(te,{className:"m-auto mt-4",onClick:Object(u.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(g){e.next=2;break}return e.abrupt("return");case 2:if(c){e.next=4;break}return e.abrupt("return");case 4:if(s){e.next=6;break}return e.abrupt("return");case 6:return i(null),O("end game",{client:c}),e.next=10,w("end game response");case 10:if((t=e.sent).success){e.next=14;break}return m(t.error,{appearance:"error",autoDismiss:!0}),e.abrupt("return");case 14:o&&o.push("/rooms/".concat(s));case 15:case"end":return e.stop()}}),e)}))),children:Z(b("return to room"))})]}):null})]})})},ne=function(e){var t=e.peep,a=e.game,c=e.player,s=e.clientId,i=Object(H.a)(),o=i.t,l=i.i18n,d=1258,u=1327+(null===c?-53:0),h=function(){var e=Object(r.useState)({width:32,height:32}),t=Object(T.a)(e,2),a=t[0],n=t[1];return Object(r.useEffect)((function(){function e(){n({width:window.innerWidth,height:window.innerHeight})}return window.addEventListener("resize",e),e(),function(){return window.removeEventListener("resize",e)}}),[]),a}(),m=Math.min((h.width-32)/d,(h.height-112)/u),b=null!==c&&void 0!==c?c:1,j=0===b?1:0;return Object(n.jsxs)("div",{className:"m-auto",style:{width:m*d+32,height:m*u+32,padding:16},children:[t&&Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)("div",{className:"fixed right-0 top-0 text-xs overflow-y-auto z-20 bg-white text-white bg-opacity-25 p-4 rounded-xl",style:{height:"10rem",width:"15rem",top:"5rem",left:"1rem"},children:Object(n.jsx)("pre",{className:"break-all whitespace-pre-wrap",children:!!a.estimate&&q(a.estimate[0],l.language).slice(0,5).map((function(e){var t=Object(T.a)(e,3),a=t[0],n=t[1],r=t[2];return"".concat(a,". ").concat(n," (").concat(r,")")})).join("\n")})}),Object(n.jsxs)("div",{className:"fixed text-center text-white",style:{marginTop:48*-m,fontSize:28*m,width:"calc(100% - 32px)",maxWidth:m*d},children:[o("Estimated score"),": ",a.estimate?a.estimate[1]:"-"]})]}),Object(n.jsx)(ie,{ratio:m,hand:Q(a,j,t),clientId:s,turn:a.state.player===j}),Object(n.jsx)("div",{style:{height:32*m}}),Object(n.jsxs)("div",{className:"flex justify-center",style:{height:189*m},children:[Object(n.jsx)(re,{ratio:m,name:a.players[j]}),Object(n.jsx)(oe,{captureField:a.board.capture_fields[j],animal9Moved:a.state.animal_9_moved,ratio:m}),Object(n.jsx)(ce,{ratio:m,score:a.state.scores[j],go:a.state.go_histories[j].length,stacking:a.state.stacking_histories[j].length,shaking:a.state.shaking_histories[j].length})]}),Object(n.jsx)("div",{style:{height:96*m}}),Object(n.jsx)(de,{centerField:a.board.center_field,ratio:m}),Object(n.jsx)("div",{style:{height:96*m}}),Object(n.jsxs)("div",{className:"flex justify-center",style:{height:189*m},children:[Object(n.jsx)(re,{ratio:m,name:a.players[b]}),Object(n.jsx)(oe,{captureField:a.board.capture_fields[b],animal9Moved:a.state.animal_9_moved,ratio:m}),Object(n.jsx)(ce,{ratio:m,score:a.state.scores[b],go:a.state.go_histories[b].length,stacking:a.state.stacking_histories[b].length,shaking:a.state.shaking_histories[b].length})]}),Object(n.jsx)("div",{style:{height:32*m}}),Object(n.jsx)(ie,{ratio:m,hand:null!==c?a.board.hands[b]:Q(a,b,t),mine:null!==c,actions:a.state.player===c?a.actions:[],clientId:s,turn:a.state.player===b})]})},re=function(e){var t=e.ratio,a=e.name,r=Object(H.a)().t,c="Wyi2TSh8fW3jioGOkjpiNHHKImPntB"===a?"AlphaGoStop":a,s="Wyi2TSh8fW3jioGOkjpiNHHKImPntB"===a?"/images/ai_image.jpg":"https://i1.wp.com/similarpng.com/wp-content/plugins/userswp/assets/images/no_profile.png";return Object(n.jsxs)("div",{style:{width:106*t,marginRight:40*t,height:90*t*1.618,fontSize:24*t,padding:8*t,lineHeight:1.1,borderRadius:8*t,backgroundColor:"#29604D",textAlign:"center",position:"relative"},className:"text-white",children:[Object(n.jsx)("div",{style:{height:90*t,backgroundColor:"white",borderRadius:8*t},children:Object(n.jsx)("img",{src:s,style:{width:90*t,height:90*t,borderRadius:8*t},className:"object-cover object-center",alt:"".concat(c).concat(r("'s")," ").concat(r("profile image"))})}),Object(n.jsx)("div",{style:{position:"absolute",bottom:8*t,width:90*t},className:"truncate",children:c})]})},ce=function(e){var t=e.ratio,a=e.score,r=e.go,c=e.stacking,s=e.shaking,i=Object(H.a)().t;return Object(n.jsxs)("div",{style:{width:106*t,marginLeft:40*t,height:90*t*1.618,fontSize:24*t,padding:8*t,lineHeight:1.1,borderRadius:8*t,backgroundColor:"#29604D",fontFamily:"sans-serif",textAlign:"left"},className:"text-white",children:[Object(n.jsxs)("div",{style:{fontSize:a>99999?"1em":a>9999?"1.1em":"1.3em",textAlign:"center",lineHeight:"".concat(48*t,"px"),whiteSpace:"nowrap",width:"min-content",marginLeft:"50%",transform:"translateX(-50%)",padding:"0 ".concat(8*t,"px"),borderRadius:8*t},className:"font-bold text-right",children:[a,i("pt")]}),Object(n.jsxs)("div",{style:{marginLeft:15*t,width:60*t},children:["\ud83d\udd25 ",Object(n.jsx)("span",{className:"font-black float-right",children:r})]}),Object(n.jsxs)("div",{style:{marginLeft:15*t,width:60*t},children:["\ud83d\udca9 ",Object(n.jsx)("span",{className:"font-black float-right",children:c})]}),Object(n.jsxs)("div",{style:{marginLeft:15*t,width:60*t},children:["\ud83d\udd14 ",Object(n.jsx)("span",{className:"font-black float-right",children:s})]})]})},se=function(e){var t=e.card,a=e.width,r=e.height,c=e.alt,s=e.title,i=e.style,l=void 0===i?{}:i,d=e.className,u=e.onClick,h=a||r?!a&&r?{width:68/105*r,height:r}:a&&!r?{width:a,height:105*a/68}:{width:a,height:r}:{width:68,height:105},m=h.width,b=h.height;return Object(n.jsx)("img",{src:P(t),style:Object(o.a)({width:m,height:b,objectPosition:"center",objectFit:"cover"},l),alt:null!==c&&void 0!==c?c:U(t),title:s,className:d,onClick:u})},ie=function(e){var t=e.hand,a=e.mine,r=void 0!==a&&a,c=e.actions,s=void 0===c?[]:c,i=e.ratio,l=e.style,h=void 0===l?{}:l,m=e.turn,b=e.clientId,j=Object(L.useToasts)().addToast,p=Object(H.a)().t,x=r?100*i:68*i,f=r?154*i:105*i,k=r?12*i:8*i;return Object(n.jsxs)("div",{className:"flex w-full place-content-center",children:[Object(n.jsx)("div",{style:{width:r?54*i:40*i,height:f+2*k,lineHeight:1},className:"flex items-center",children:m&&t.length>0&&Object(n.jsx)(M.a,{size:r?40*i:32*i,color:"white"})}),Object(n.jsx)("div",{className:"flex",style:Object(o.a)({padding:k/2,backgroundColor:0===t.length?"transparent":"#29604D",borderRadius:8*i,marginRight:r?54*i:40*i,minWidth:16*i+2*k,height:f+2*k},h),children:t.map((function(e,t){var a=r?s.find((function(t){return"throw"===t.kind&&t.card===e||"throw bomb"===t.kind&&e.startsWith("*")||"bomb"===t.kind&&["B","A","R","J"].includes(e[0])&&t.month===parseInt(e.substring(1,3),10)||"shakable"===t.kind&&t.card===e})):void 0,c=a?"throw"===a.kind?Z(p("throw the card",{card:e})):"throw bomb"===a.kind?Z(p("throw a bomb card")):"bomb"===a.kind?Z(p("throw a bomb of",{month:a.month})):Z(p("shake with",{card:e,month:e.substring(1,3)})):void 0;return Object(n.jsx)($,{card:e,style:{width:x,margin:k/2,borderRadius:4*i},title:c,hoverEnabled:r,anchorBottom:!0,className:r?0===s.length?"cursor-not-allowed":"cursor-pointer":"",onClick:r?Object(u.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a){e.next=2;break}return e.abrupt("return");case 2:return g.emit("play",{client:b,action:a}),e.next=5,w("play response");case 5:(t=e.sent).success||j(t.error,{appearance:"error",autoDismiss:!0});case 7:case"end":return e.stop()}}),e)}))):void 0},t)}))})]})},oe=function(e){var t=e.captureField,a=e.animal9Moved,r=e.ratio,c=(e.style,t.filter((function(e){return e.startsWith("B")}))),s=t.filter((function(e){return e.startsWith("A")&&(!a||"A09"!==e)})),i=s.includes("A02")&&s.includes("A04")&&s.includes("A08"),o=Math.max(s.length-4,0)+(i?5:0),l=t.filter((function(e){return e.startsWith("R")})),d=l.includes("R01")&&l.includes("R02")&&l.includes("R03"),u=l.includes("R04")&&l.includes("R05")&&l.includes("R07"),h=l.includes("R06")&&l.includes("R09")&&l.includes("R10"),m=Math.max(l.length-4,0)+(h?3:0)+(u?3:0)+(d?3:0),b=t.filter((function(e){return e.startsWith("J")||e.startsWith("+")||!!a&&"A09"===e})),j=b.map((function(e){return e.startsWith("J")?"J110"===e||"J111"===e?1:"J120"===e||"J112"===e?2:1:"A09"===e||"+2"===e?2:"+3"===e?3:0})).reduce((function(e,t){return e+t}),0);return Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)(le,{pile:c,sizeOfChunk:5,ratio:r,style:{marginRight:40*r},number:c.length<3?c.length:5===c.length?15:4===c.length?4:c.includes("B12")?2:3,isScore:c.length>=3}),Object(n.jsx)(le,{pile:s,ratio:r,style:{marginRight:40*r},number:o>0?o:s.length,isScore:o>0}),Object(n.jsx)(le,{pile:l,ratio:r,style:{marginRight:40*r},number:m>0?m:l.length,isScore:m>0}),Object(n.jsx)(le,{pile:b,sizeOfChunk:8,ratio:r,style:{marginRight:40*r},number:j>9?j-9:j,isScore:j>9})]})},le=function(e){var t=e.pile,a=e.ratio,r=e.number,c=e.isScore,s=e.sizeOfChunk,i=void 0===s?3:s,l=e.style,d=void 0===l?{}:l,u=68*a,h=105*a,m=24*a,b=28*a,j=Math.ceil(t.length/i),p=u+(i-1)*m,x=h+(j-1)*b,f=t.length-1;return Object(n.jsxs)("div",{style:Object(o.a)({width:p,height:x,position:"relative"},d),children:[t.map((function(e,t){return Object(n.jsx)(se,{card:e,width:u,style:{position:"absolute",left:t%i*m,top:Math.floor(t/i)*b,borderRadius:4*a}},t)})),0===t.length?null:Object(n.jsx)("div",{className:"absolute",style:{width:40*a,height:40*a,left:f%i*m+u-40*a,top:Math.floor(f/i)*b+h-40*a,backgroundColor:"white",border:"".concat(4*a,"px solid ").concat(c?"#262C34":"#4f5257"),color:c?"#262C34":"#65676b",fontWeight:c?"bold":"normal",borderRadius:8*a,fontSize:28*a,lineHeight:"".concat(32*a,"px"),textAlign:"center"},children:r})]})},de=function(e){var t=e.centerField,a=e.ratio,r=e.style,c=void 0===r?{}:r;return Object(n.jsxs)("div",{className:"flex",style:Object(o.a)({height:392*a},c),children:[Object(n.jsxs)("div",{className:"flex flex-wrap justify-between",style:{height:446*a,width:428*a},children:[Object(n.jsx)(ue,{field:t[1],ratio:a}),Object(n.jsx)(ue,{field:t[2],ratio:a}),Object(n.jsx)(ue,{field:t[3],ratio:a}),Object(n.jsx)(ue,{field:t[7],ratio:a}),Object(n.jsx)(ue,{field:t[8],ratio:a}),Object(n.jsx)(ue,{field:t[9],ratio:a})]}),Object(n.jsx)("div",{className:"flex justify-center items-center",style:{height:392*a,width:290*a},children:Object(n.jsx)(se,{card:"?",width:90*a,style:{borderRadius:8*a}})}),Object(n.jsxs)("div",{className:"flex flex-wrap justify-between",style:{height:446*a,width:428*a},children:[Object(n.jsx)(ue,{field:t[4],ratio:a}),Object(n.jsx)(ue,{field:t[5],ratio:a}),Object(n.jsx)(ue,{field:t[6],ratio:a}),Object(n.jsx)(ue,{field:t[10],ratio:a}),Object(n.jsx)(ue,{field:t[11],ratio:a}),Object(n.jsx)(ue,{field:t[12],ratio:a})]})]})},ue=function(e){var t=e.field,a=void 0===t?[]:t,r=e.ratio,c=(e.style,a.length<=3?1:4===a.length?2/3:.5);return Object(n.jsx)("div",{className:"relative",style:{height:180*r,width:122*r},children:a.map((function(e,t){return Object(n.jsx)(se,{card:e,width:90*r,style:{position:"absolute",top:20*t*c*r,left:16*t*c*r,borderRadius:8*r}},t)}))})},he=function(e){var t=e.peep,a=e.game,r=e.player,c=e.clientId,s=e.roomId,i=e.updateGame,l=Object(R.a)(e,["peep","game","player","clientId","roomId","updateGame"]);return Object(n.jsxs)("div",{className:"w-full h-full flex place-items-center",style:{backgroundColor:"#3B7157"},children:[Object(n.jsx)(ne,{peep:t,game:a,player:r,clientId:c}),a.state.ended?Object(n.jsx)(ae,Object(o.a)({game:a,player:r,clientId:c,updateGame:i,roomId:s},l)):null]})},me=Object(j.connect)((function(e){return e}),f)((function(e){var t,a=e.id,c=e.updateGame,s=e.game,i=e.clientId,l=e.rooms,h=e.roomId,m=Object(R.a)(e,["id","updateGame","game","clientId","rooms","roomId"]),b=Object(L.useToasts)().addToast;Object(r.useEffect)((function(){var e=function(e){e.success&&c(e.result)};return O("spectate game",{room:a}),N("spectate game response",e),function(){return I("spectate game response",e)}}),[a,c]);var j=Object(H.a)(),p=j.t,f=j.i18n,k=s&&s.players[s.state.player]===i,v=Object(r.useState)(!1),y=Object(T.a)(v,2),C=y[0],W=y[1],D=Object(r.useState)(!1),F=Object(T.a)(D,2),M=F[0],G=F[1],P=Object(r.useState)(null),U=Object(T.a)(P,2),Y=U[0],K=U[1],Q=Object(r.useState)(!1),V=Object(T.a)(Q,2),X=V[0],q=V[1];x()(Object(u.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(g){e.next=2;break}return e.abrupt("return");case 2:if(s){e.next=4;break}return e.abrupt("return");case 4:if(k){e.next=6;break}return e.abrupt("return");case 6:if(Object.values(s.flags).some((function(e){return e}))){e.next=8;break}return e.abrupt("return");case 8:s.flags.go?(G(!0),K(Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)("h2",{className:"font-black text-xl text-gray-800 mb-3",children:p("Declare Go?")}),Object(n.jsxs)("div",{className:"flex justify-center",children:[Object(n.jsx)(te,{style:{minWidth:"3em",marginRight:"2em"},onClick:Object(u.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return O("play",{client:i,action:{kind:"go",option:!0}}),G(!1),e.next=4,w("play response");case 4:(t=e.sent).success?c(t.result):(G(!0),b(t.error,{appearance:"error",autoDismiss:!0}));case 6:case"end":return e.stop()}}),e)}))),children:Object(n.jsx)("span",{children:Z(p("go"))})}),Object(n.jsx)(te,{onClick:Object(u.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return O("play",{client:i,action:{kind:"go",option:!1}}),G(!1),e.next=4,w("play response");case 4:(t=e.sent).success?c(t.result):(G(!0),b(t.error,{appearance:"error",autoDismiss:!0}));case 6:case"end":return e.stop()}}),e)}))),children:Object(n.jsx)("span",{children:Z(p("stop"))})})]})]}))):s.flags.shaking?(G(!0),K(Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)("h2",{className:"font-black text-xl text-gray-800 mb-3",children:p("Shake cards?")}),Object(n.jsx)("div",{style:{maxWidth:"calc(80% + 2em)",margin:"auto",marginTop:"2em"},children:Object(n.jsx)("div",{className:"flex justify-between",style:{maxWidth:"14em",margin:"auto"},children:s.state.shaking[1].map((function(e){return Object(n.jsx)($,{card:e,hoverEnabled:!1,style:{maxWidth:"4em",width:"30%",cursor:"default"}},e)}))})}),Object(n.jsxs)("div",{className:"flex justify-center mt-4",children:[Object(n.jsx)(te,{style:{minWidth:"3em",marginRight:"2em"},onClick:Object(u.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return O("play",{client:i,action:{kind:"shaking",option:!0}}),G(!1),e.next=4,w("play response");case 4:(t=e.sent).success?c(t.result):(G(!0),b(t.error,{appearance:"error",autoDismiss:!0}));case 6:case"end":return e.stop()}}),e)}))),children:Object(n.jsx)("span",{children:Z(p("yes"))})}),Object(n.jsx)(te,{style:{minWidth:"3em"},onClick:Object(u.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return O("play",{client:i,action:{kind:"shaking",option:!1}}),G(!1),e.next=4,w("play response");case 4:(t=e.sent).success?c(t.result):(G(!0),b(t.error,{appearance:"error",autoDismiss:!0}));case 6:case"end":return e.stop()}}),e)}))),children:Object(n.jsx)("span",{children:Z(p("no"))})})]})]}))):s.flags.select_match?(G(!0),K(Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)("h2",{className:"font-black text-xl text-gray-800 mb-3",children:p("Please Choose a Card to Capture.")}),Object(n.jsx)("div",{style:{maxWidth:"calc(80% + 2em)",margin:"auto",marginTop:"2em"},children:Object(n.jsxs)("div",{className:"flex justify-between",style:{maxWidth:"14em",margin:"auto"},children:[Object(n.jsx)($,{card:s.actions[0].match,style:{maxWidth:"6em",width:"40%"},onClick:Object(u.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return O("play",{client:i,action:{kind:"select match",match:s.actions[0].match}}),G(!1),e.next=4,w("play response");case 4:(t=e.sent).success?c(t.result):(G(!0),b(t.error,{appearance:"error",autoDismiss:!0}));case 6:case"end":return e.stop()}}),e)})))}),Object(n.jsx)($,{card:s.actions[1].match,style:{maxWidth:"6em",width:"40%"},onClick:Object(u.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return O("play",{client:i,action:{kind:"select match",match:s.actions[1].match}}),G(!1),e.next=4,w("play response");case 4:(t=e.sent).success?c(t.result):(G(!0),b(t.error,{appearance:"error",autoDismiss:!0}));case 6:case"end":return e.stop()}}),e)})))})]})})]}))):s.flags.move_animal_9?(G(!0),K(Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)("h2",{className:"font-black text-xl text-gray-800 mb-3",children:p("Use Animal of September As a Double Junk?")}),Object(n.jsxs)("div",{className:"flex justify-center",children:[Object(n.jsx)(te,{style:{minWidth:"3em",marginRight:"2em"},onClick:Object(u.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return O("play",{client:i,action:{kind:"move animal 9",option:!0}}),G(!1),e.next=4,w("play response");case 4:(t=e.sent).success?c(t.result):(G(!0),b(t.error,{appearance:"error",autoDismiss:!0}));case 6:case"end":return e.stop()}}),e)}))),children:Object(n.jsx)("span",{children:Z(p("yes"))})}),Object(n.jsx)(te,{style:{minWidth:"3em"},onClick:Object(u.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return O("play",{client:i,action:{kind:"move animal 9",option:!1}}),G(!1),e.next=4,w("play response");case 4:(t=e.sent).success?c(t.result):(G(!0),b(t.error,{appearance:"error",autoDismiss:!0}));case 6:case"end":return e.stop()}}),e)}))),children:Object(n.jsx)("span",{children:Z(p("no"))})})]})]}))):s.flags.four_of_a_month&&(G(!0),K(Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)("h2",{className:"font-black text-xl text-gray-800 mb-3",children:p("Finish the Game with Four-of-a-Month?")}),Object(n.jsxs)("div",{className:"flex justify-center",children:[Object(n.jsx)(te,{style:{minWidth:"3em",marginRight:"2em"},onClick:Object(u.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return O("play",{client:i,action:{kind:"four of a month",option:!0}}),G(!1),e.next=4,w("play response");case 4:(t=e.sent).success?c(t.result):(G(!0),b(t.error,{appearance:"error",autoDismiss:!0}));case 6:case"end":return e.stop()}}),e)}))),children:Object(n.jsx)("span",{children:Z(p("yes"))})}),Object(n.jsx)(te,{style:{minWidth:"3em"},onClick:Object(u.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return O("play",{client:i,action:{kind:"four of a month",option:!1}}),G(!1),e.next=4,w("play response");case 4:(t=e.sent).success?c(t.result):(G(!0),b(t.error,{appearance:"error",autoDismiss:!0}));case 6:case"end":return e.stop()}}),e)}))),children:Object(n.jsx)("span",{children:Z(p("no"))})})]})]})));case 9:case"end":return e.stop()}}),e)}))),[g,s,c]);var ee=null===s||void 0===s?void 0:s.players.findIndex((function(e){return e===i})),ae=!!i&&(null===s||void 0===s?void 0:s.players.includes(i));return null===s?Object(n.jsx)("div",{className:"w-full h-full",children:Object(n.jsx)(J.BlockLoading,{})}):Object(n.jsxs)("div",{className:"w-full h-full relative",style:{backgroundColor:"#3B7157"},children:[Object(n.jsx)(B,{style:{position:"relative",height:"2em",zIndex:20},children:Object(n.jsxs)("div",{className:"flex justify-between",children:[Object(n.jsx)("div",{children:ae&&Object(n.jsx)(te,{dark:!0,size:"sm",onClick:Object(u.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(g){e.next=2;break}return e.abrupt("return");case 2:if(i){e.next=4;break}return e.abrupt("return");case 4:return g.emit("end game",{client:i}),e.next=7,w("end game response");case 7:(t=e.sent).success||b(t.error,{appearance:"error",autoDismiss:!0});case 9:case"end":return e.stop()}}),e)}))),children:"End Game"})}),Object(n.jsxs)("div",{className:"flex",children:[!!l&&(null===(t=l.find((function(e){return e.id===m.match.params.roomId})))||void 0===t?void 0:t.singlePlayer)&&Object(n.jsx)(A,{className:"mr-3",onClick:function(){q((function(e){return!e}))},children:X?Object(n.jsx)(_.a,{color:"rgba(255, 255, 255, 0.9)"}):Object(n.jsx)(_.b,{color:"rgba(255, 255, 255, 0.9)"})}),Object(n.jsx)(A,{className:"mr-3",onClick:function(){W((function(e){return!e}))},children:C?Object(n.jsx)(z.a,{color:"rgba(255, 255, 255, 0.9)"}):Object(n.jsx)(E.a,{color:"rgba(255, 255, 255, 0.9)"})}),Object(n.jsx)(A,{className:"mr-3",onClick:function(){f.changeLanguage("ko"!==f.language?"ko":"en")},children:Object(n.jsx)(z.b,{color:"rgba(255, 255, 255, 0.9)"})}),Object(n.jsx)(A,{onClick:function(){var e,t={board:(e=s).board,flags:e.flags,state:e.state},a="data:text/json;charset=utf-8,"+encodeURIComponent(JSON.stringify(t)),n=document.createElement("a");n.setAttribute("href",a),n.setAttribute("download","game_".concat((new Date).toISOString(),".json")),document.body.appendChild(n),n.click(),n.remove()},children:Object(n.jsx)(S.e,{color:"rgba(255, 255, 255, 0.9)"})})]})]})}),Object(n.jsxs)("div",{className:"w-full absolute bottom-0",style:{height:"calc(100% - 5em)"},children:[C&&Object(n.jsx)("div",{className:"fixed right-0 top-0 text-xs overflow-y-auto z-20 bg-white text-white bg-opacity-25 p-4 rounded-xl",style:{height:"10rem",width:"28rem",top:"5rem",right:"1rem"},children:Object(n.jsx)("pre",{className:"break-all whitespace-pre-wrap",children:s.logs.join("\n")})}),Object(n.jsx)(he,Object(o.a)({peep:X,game:s,player:-1===ee?null:ee,clientId:i,roomId:h,updateGame:c},m)),M&&Object(n.jsx)("div",{className:"w-full h-full flex place-items-center fixed z-10 top-0 left-0",style:{backgroundColor:"rgba(0, 0, 0, 0.45)"},children:Object(n.jsx)("div",{className:"p-8 bg-white rounded-2xl w-2/3 text-center m-auto",children:Y})})]})]})})),be=function(e){return Object(n.jsx)("input",Object(o.a)(Object(o.a)({},e),{},{className:"shadow appearance-none border rounded py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline ".concat(e.className)}))},je=function(e){var t=e.history,a=e.clientId,r=e.roomId,c=e.rooms,s=e.updateClientId,i=e.updateRoomId,o=Object(L.useToasts)().addToast;return Object(n.jsx)(n.Fragment,{children:Object(n.jsxs)("div",{className:"flex justify-between",children:[Object(n.jsxs)("div",{className:"flex",children:[Object(n.jsx)(A,{className:"mr-4",onClick:function(){return t.push("/")},children:Object(n.jsx)(S.b,{})}),Object(n.jsx)(be,{className:"w-64 my-1",style:{maxWidth:r?"calc(100vw - 14rem)":"calc(100vw - 10rem)"},placeholder:"Client ID",value:null!==a&&void 0!==a?a:"",onChange:function(e){s(e.target.value)}}),r&&Object(n.jsx)(A,{className:"ml-4",onClick:G({history:t,clientId:a,roomId:r,rooms:c,updateRoomId:i,addToast:o},!1),children:Object(n.jsx)(S.c,{})})]}),Object(n.jsx)("div",{children:Object(n.jsx)(A,{className:"ml-4",onClick:function(){return t.push("/estimate")},children:Object(n.jsx)(S.a,{})})})]})})},pe=Object(j.connect)((function(e){return e}),f)((function(e){var t,a=e.match,r=e.rooms,c=e.clientId,s=e.updateClientId,i=e.roomId,o=e.updateRoomId,l=e.history,h=e.location,m=Object(L.useToasts)().addToast,j=null!==(t=null===r||void 0===r?void 0:r.find((function(e){return e.id===a.params.roomId})))&&void 0!==t?t:null;return null===r?Object(n.jsx)(D,{children:Object(n.jsx)(J.BlockLoading,{})}):j?j.gameStarted?Object(n.jsx)(me,{id:a.params.roomId,history:l,match:a,location:h}):Object(n.jsxs)(D,{children:[Object(n.jsx)(B,{children:Object(n.jsx)(je,{history:l,clientId:c,rooms:r,roomId:i,updateClientId:s,updateRoomId:o})}),Object(n.jsxs)("main",{children:[Object(n.jsxs)("h2",{className:"p-4 font-bold text-3xl text-gray-800 inline-flex",children:["Room ",a.params.roomId,i===a.params.roomId&&c&&Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)(A,{onClick:Object(u.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return O("start game",{client:c}),e.next=3,w("start game response");case 3:(t=e.sent).success||m(t.error,{appearance:"error",autoDismiss:!0});case 5:case"end":return e.stop()}}),e)}))),className:"ml-4",children:Object(n.jsx)(W.a,{})}),Object(n.jsx)(A,{onClick:Object(u.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return O("exit room",{client:c}),e.next=3,w("exit room response");case 3:(t=e.sent).success?l.replace("/"):m(t.error,{appearance:"error",autoDismiss:!0});case 5:case"end":return e.stop()}}),e)}))),className:"ml-4",children:Object(n.jsx)(S.d,{})})]}),i!==a.params.roomId&&c&&Object(n.jsx)(n.Fragment,{children:Object(n.jsx)(A,{onClick:Object(u.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return O("join room",{client:c,room:a.params.roomId}),e.next=3,w("join room response");case 3:(t=e.sent).success?o(j.id):m(t.error,{appearance:"error",autoDismiss:!0});case 5:case"end":return e.stop()}}),e)}))),className:"ml-4",children:Object(n.jsx)(S.c,{})})})]}),Object(n.jsxs)(F.Wrapper,{children:[Object(n.jsx)(F.Head,{children:Object(n.jsx)(F.Row,{children:Object(n.jsx)(F.Header,{children:"Player ID"})})}),Object(n.jsx)(F.Body,{children:null===r?Object(n.jsx)(F.Row,{children:Object(n.jsx)(F.Data,{className:"w-full",colSpan:3,children:Object(n.jsx)("div",{className:"h-24 relative",children:Object(n.jsx)(J.BlockLoading,{})})})}):r.find((function(e){return e.id===a.params.roomId})).players.map((function(e){return Object(n.jsx)(F.Row,{children:Object(n.jsx)(F.Data,{className:"w-1/2",children:Object(n.jsx)("span",{className:"text-gray-700 px-6 py-3 flex items-center",children:e})})},e)}))})]})]})]}):Object(n.jsx)(b.a,{to:"/"})})),xe=a(88),fe=Object(j.connect)((function(e){return e}),f)((function(e){var t=e.history,a=e.clientId,r=e.roomId,c=e.rooms,s=e.updateRoomId,i=e.updateClientId,o=e.updateRooms,l=Object(L.useToasts)().addToast;return x()(G({history:t,clientId:a,roomId:r,rooms:c,updateRoomId:s,addToast:l},!0),[r,a,t,c,s]),Object(n.jsxs)(D,{children:[Object(n.jsx)(B,{children:Object(n.jsx)(je,{history:t,clientId:a,rooms:c,roomId:r,updateClientId:i,updateRoomId:s})}),Object(n.jsxs)("main",{children:[Object(n.jsx)("h2",{className:"p-4 font-bold text-3xl text-gray-800",children:"Rooms"}),Object(n.jsxs)(F.Wrapper,{children:[Object(n.jsx)(F.Head,{children:Object(n.jsxs)(F.Row,{children:[Object(n.jsx)(F.Header,{children:"Room ID"}),Object(n.jsx)(F.Header,{children:"# of Players"}),Object(n.jsx)(F.Header,{})]})}),Object(n.jsxs)(F.Body,{children:[null===c?Object(n.jsx)(F.Row,{children:Object(n.jsx)(F.Data,{className:"w-full",colSpan:3,children:Object(n.jsx)("div",{className:"h-24 relative",children:Object(n.jsx)(J.BlockLoading,{})})})}):c.map((function(e){return Object(n.jsxs)(F.Row,{children:[Object(n.jsx)(F.Data,{className:"w-1/2",children:Object(n.jsx)("span",{className:"text-gray-700 px-6 py-3 flex items-center",children:e.id})}),Object(n.jsx)(F.Data,{className:"w-1/4",children:e.gameStarted?Object(n.jsxs)("span",{className:"text-gray-500 line-through px-6 py-3 flex items-center",children:[e.players.length,"/2"]}):Object(n.jsxs)("span",{className:"text-gray-700 px-6 py-3 flex items-center",children:[e.players.length,"/2"]})}),Object(n.jsxs)(F.Data,{className:"p-2 flex justify-end",children:[!e.gameStarted&&Object(n.jsx)(A,{className:"mr-3",onClick:Object(u.a)(d.a.mark((function n(){var c;return d.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(r!==e.id){n.next=3;break}return t.push("/rooms/".concat(e.id)),n.abrupt("return");case 3:if(!r){n.next=6;break}return l("You are already in a different room.",{appearance:"error",autoDismiss:!0}),n.abrupt("return");case 6:if(a){n.next=9;break}return l("You did not set the clientId yet.",{appearance:"error",autoDismiss:!0}),n.abrupt("return");case 9:return O("join room",{client:a,room:e.id}),n.next=12,w("join room response");case 12:(c=n.sent).success?(s(e.id),t.push("/rooms/".concat(e.id))):l(c.error,{appearance:"error",autoDismiss:!0});case 14:case"end":return n.stop()}}),n)}))),children:Object(n.jsx)(S.c,{})}),Object(n.jsx)(A,{onClick:function(){t.push("/rooms/".concat(e.id))},children:Object(n.jsx)(xe.a,{})})]})]},e.id)})),Object(n.jsx)(F.Row,{children:Object(n.jsx)(F.Data,{className:"w-full",colSpan:3,children:Object(n.jsx)("div",{className:"h-24 flex items-center justify-center",children:Object(n.jsx)(te,{onClick:Object(u.a)(d.a.mark((function e(){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!r){e.next=3;break}return l("You are already in a different room.",{appearance:"error",autoDismiss:!0}),e.abrupt("return");case 3:if(a){e.next=6;break}return l("You did not set the clientId yet.",{appearance:"error",autoDismiss:!0}),e.abrupt("return");case 6:return O("make room",{client:a}),e.next=9,w("make room response");case 9:(n=e.sent).success?(o([].concat(Object(h.a)(null!==c&&void 0!==c?c:[]),[n.result])),s(n.result.id),t.push("/rooms/".concat(n.result.id))):l(n.error,{appearance:"error",autoDismiss:!0});case 11:case"end":return e.stop()}}),e)}))),children:"Make a room"})})})})]})]})]})]})}));function ke(e,t){if(!e)throw new Error(t)}var ge=Object(j.connect)((function(e){return e}),f)((function(){return Object(n.jsx)(D,{children:Object(n.jsx)("div",{className:"flex w-full h-screen text-center place-items-center place-content-center",children:Object(n.jsx)("span",{className:"text-gray-500 font-bold",style:{fontSize:"10em"},children:"\u2204"})})})})),Oe=a(62),ve=a(89),we=a(91),ye=a(32);Oe.a.use(ve.a).use(we.a).use(ye.e).init({fallbackLng:"en",debug:!1,interpolation:{format:function(e,t,a){return"uppercase"===t?e.toUpperCase():"capitalize"===t?Z(e):"card"===t?"ko"===a?U(e):function(e){var t=parseInt(e.substring(1,3)),a=Y(t);if(e.startsWith("B"))return"bright of ".concat(a);if(e.startsWith("A"))return"animal of ".concat(a);if(e.startsWith("R")){var n=[1,2,3].includes(t)?"red":[4,5,7].includes(t)?"blue":[6,9,10].includes(t)?"plant":null;return"ribbon of ".concat(a).concat(n?" (".concat(n,")"):"")}if(e.startsWith("J")){var r=parseInt(e.substring(1,3)),c=parseInt(e.substring(3)),s=2===c||12===r?2:1;return"".concat(2===s?"double ":"","junk of ").concat(a).concat(2===s?"":" (".concat(c,")"))}if(e.startsWith("+")){var i=parseInt(e.substring(1));return"bonus card (".concat(2===i?"+2":"+3",")")}if(e.startsWith("*")){var o=parseInt(e.substring(1));return"bomb card (".concat(o,")")}return"hidden card"}(e):"month"===t?"ko"===a?"".concat(parseInt(e),"\uc6d4"):Y(parseInt(e)):e},escapeValue:!1}});var Ne=Oe.a,Ie=function(e){var t=e.value,a=e.onChange,r=c.a.useRef(t);return Object(n.jsx)("div",{contentEditable:!0,className:"w-full px-4 font-mono break-all overflow-y-auto whitespace-normal",style:{minHeight:"8rem",maxHeight:"calc(100vh - 20rem)"},onInput:function(e){a&&a(e.target.innerHTML)},dangerouslySetInnerHTML:{__html:r.current}})},Je=Object(j.connect)((function(e){return e}),f)((function(e){var t=e.history,a=e.clientId,c=e.updateClientId,s=e.roomId,i=e.rooms,o=e.updateRoomId,l=Object(L.useToasts)().addToast,h=Object(r.useState)(null),m=Object(T.a)(h,2),b=m[0],j=m[1],p=Object(r.useState)(""),x=Object(T.a)(p,2),f=x[0],k=x[1];return Object(n.jsxs)(D,{children:[Object(n.jsx)(B,{children:Object(n.jsx)(je,{history:t,clientId:a,rooms:i,roomId:s,updateClientId:c,updateRoomId:o})}),Object(n.jsxs)("main",{children:[Object(n.jsx)("h2",{className:"p-4 font-bold text-3xl text-gray-800",children:"Estimate"}),Object(n.jsxs)("div",{className:"overflow-x-auto bg-white rounded-lg shadow max-w-4xl m-auto box-content mx-4 overflow-hidden",children:[Object(n.jsxs)("div",{className:"w-full px-4 py-3 relative text-center",style:{minHeight:"3rem"},children:[Object(n.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"54",height:"14",viewBox:"0 0 54 14",className:"absolute py-1 box-content",style:{left:"1rem"},children:Object(n.jsxs)("g",{fill:"none",fillRule:"evenodd",transform:"translate(1 1)",children:[Object(n.jsx)("circle",{cx:"6",cy:"6",r:"6",fill:"#FF5F56",stroke:"#E0443E",strokeWidth:".5"}),Object(n.jsx)("circle",{cx:"26",cy:"6",r:"6",fill:"#FFBD2E",stroke:"#DEA123",strokeWidth:".5"}),Object(n.jsx)("circle",{cx:"46",cy:"6",r:"6",fill:"#27C93F",stroke:"#1AAB29",strokeWidth:".5"})]})}),Object(n.jsx)("div",{className:"text-gray-700 font-bold",style:{margin:"0 72px"},children:"Paste the serialized game (JSON file) into the text field below."})]}),Object(n.jsx)(Ie,{value:f,onChange:function(e){return k(e)}}),Object(n.jsx)("div",{className:"flex justify-end p-4",children:Object(n.jsx)(te,{onClick:Object(u.a)(d.a.mark((function e(){var t,a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.prev=0,t=JSON.parse(f),e.next=8;break;case 4:return e.prev=4,e.t0=e.catch(0),l("The JSON is invalid.",{appearance:"error",autoDismiss:!0}),e.abrupt("return");case 8:return O("estimate game",{game:t}),e.next=11,w("estimate game response");case 11:if(!(a=e.sent).success){e.next=16;break}j(a.result),e.next=18;break;case 16:return l(a.error,{appearance:"error",autoDismiss:!0}),e.abrupt("return");case 18:case"end":return e.stop()}}),e,null,[[0,4]])}))),children:"Query to AI"})})]}),!!b&&Object(n.jsx)("div",{className:"w-full h-full flex place-items-center fixed z-10 top-0 left-0",style:{backgroundColor:"rgba(0, 0, 0, 0.45)"},children:Object(n.jsxs)("div",{className:"p-8 bg-white rounded-2xl w-2/3 text-center m-auto",children:[Object(n.jsxs)("h3",{className:"font-black text-3xl text-gray-800 mb-3",children:["Estimation: ",b.value," Points"]}),Object(n.jsx)("div",{className:"text-left pt-4",children:q(b.policy,Ne.language).map((function(e){var t=Object(T.a)(e,3),a=t[0],r=t[1],c=t[2];return Object(n.jsxs)("div",{className:"flex ".concat(1===a?"h-12 text-xl font-bold":"h-10"," my-4"),children:[Object(n.jsxs)("div",{className:"w-20 pr-8 py-2 text-right",children:[a,"."]}),Object(n.jsxs)("div",{className:"box-border p-2 relative",style:{width:"calc(100% - 5rem)"},children:[Object(n.jsx)("div",{className:"absolute top-0 left-0 h-full bg-gray-300 rounded-xl",style:{width:"".concat(parseFloat(c)/parseFloat(q(b.policy,Ne.language)[0][2])*100,"%")}}),Object(n.jsx)("span",{className:"relative z-10",children:r}),Object(n.jsx)("span",{className:"absolute right-0 mr-2 z-10",children:c})]})]})}))}),Object(n.jsx)("div",{className:"flex justify-end pt-4",children:Object(n.jsx)(te,{onClick:function(){return j(null)},children:"Close"})})]})})]})]})})),Re=Object(j.connect)((function(e){return e}),f)((function(e){var t=e.clientId,a=e.updateClientId,c=e.updateRoomId,s=e.updateRooms,i=Object(L.useToasts)().addToast;return Object(r.useEffect)((function(){[].concat(Object(h.a)([2,4,5,6,7,8,9,10,12].map((function(e){return"A".concat(e.toString().padStart(2,"0"))}))),Object(h.a)([1,3,8,11,12].map((function(e){return"B".concat(e.toString().padStart(2,"0"))}))),Object(h.a)([1,2,3,4,5,6,7,8,9,10].map((function(e){return"J".concat(e.toString().padStart(2,"0"))})).map((function(e){return[e+"0",e+"1"]})).flat()),["J110","J111","J112","J120"],Object(h.a)([1,2,3,4,5,6,7,9,10,12].map((function(e){return"R".concat(e.toString().padStart(2,"0"))}))),["bomb","bonus2","bonus3","hidden"]).forEach((function(e){(new Image).src="/images/cards/".concat(e,".png")}))}),[]),x()(Object(u.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(g){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,w("connect response");case 4:if((t=e.sent).success)try{ke(t.result.split(" ")[1].slice(0,-1)===g.id),console.log("connected!")}catch(a){i("Socket id does not match",{appearance:"error",autoDismiss:!0})}else i(t.error,{appearance:"error",autoDismiss:!0});case 6:case"end":return e.stop()}}),e)}))),[g.connected]),Object(r.useEffect)((function(){var e;a(null!==(e=localStorage.getItem("clientId"))&&void 0!==e?e:"")}),[a]),x()(Object(u.a)(d.a.mark((function e(){var a,n,r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return");case 2:return O("my room",{client:t}),e.next=5,w("my room response");case 5:(a=e.sent).success?c(null!==(n=null===(r=a.result)||void 0===r?void 0:r.id)&&void 0!==n?n:null):i(a.error,{appearance:"error",autoDismiss:!0});case 7:case"end":return e.stop()}}),e)}))),[t]),Object(r.useEffect)((function(){O("list rooms",{});var e=function(e){e.success&&s(e.result)};return N("list rooms response",e),function(){I("list rooms response",e)}}),[s]),Object(n.jsx)(m.a,{children:Object(n.jsxs)(b.d,{children:[Object(n.jsx)(b.b,{path:"/rooms/:roomId",component:pe}),Object(n.jsx)(b.b,{path:"/rooms",render:function(){return Object(n.jsx)(b.a,{to:"/"})}}),Object(n.jsx)(b.b,{exact:!0,path:"/estimate",render:function(e){return Object(n.jsx)(Je,Object(o.a)({},e))}}),Object(n.jsx)(b.b,{exact:!0,path:"/",render:function(e){return Object(n.jsx)(fe,Object(o.a)({},e))}}),Object(n.jsx)(b.b,{path:"/",render:function(e){return Object(n.jsx)(ge,Object(o.a)({},e))}})]})})})),Ce=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,182)).then((function(t){var a=t.getCLS,n=t.getFID,r=t.getFCP,c=t.getLCP,s=t.getTTFB;a(e),n(e),r(e),c(e),s(e)}))},Ae=a(92),Se=a.n(Ae)()({clientId:null,rooms:null,roomId:null,game:null});console.error=function(){var e=console.error;return function(t){(t+"").startsWith("Warning: A component is `contentEditable`")||e.apply(console,arguments)}}(),i.a.render(Object(n.jsx)(j.Provider,{store:Se,children:Object(n.jsx)(L.ToastProvider,{children:Object(n.jsx)(Re,{})})}),document.getElementById("root")),Ce()}},[[180,1,2]]]);
//# sourceMappingURL=main.a7d344a3.chunk.js.map