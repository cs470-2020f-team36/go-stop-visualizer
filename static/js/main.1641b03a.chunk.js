(this["webpackJsonpgo-stop-visualizer"]=this["webpackJsonpgo-stop-visualizer"]||[]).push([[0],{110:function(e,t){},156:function(e,t,r){},158:function(e,t,r){"use strict";r.r(t);var n=r(1),a=r(2),s=r(18),c=r.n(s),i=(r(83),r(7)),o=r(3),l=r.n(o),d=r(6),u=r(46),j=r(10),b=r(15),h=r(20),m=r.n(h),p=function(e){return{updateClientId:function(e,t){return localStorage.setItem("clientId",t),{clientId:t}},updateRooms:function(e,t){return{rooms:t}},updateRoomId:function(e,t){return{roomId:t}},updateGame:function(e,t){return{game:t}}}},x=r(66),f=r.n(x)()("https://cs470-go-stop.herokuapp.com/");function O(e,t){return g.apply(this,arguments)}function g(){return(g=Object(d.a)(l.a.mark((function e(t,r){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:f.emit(t,r);case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function v(e){return y.apply(this,arguments)}function y(){return(y=Object(d.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e){f.once(t,(function(t){e(t)}))})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function w(e,t){f.on(e,t)}function k(e,t){f.off(e,t)}var N=r(21),I=r(12),R={sm:"text-xl",base:"text-2xl",lg:"text-4xl"},C=function(e){var t,r=e.size,a=void 0===r?"base":r,s=Object(I.a)(e,["size"]);return Object(n.jsx)("button",Object(i.a)(Object(i.a)({},s),{},{className:"flex items-center justify-center p-3 rounded-full\n        disabled:bg-transparent hover:bg-gray-300 active:bg-gray-400 focus:bg-gray-400 \n        disabled:opacity-50 disabled:cursor-not-allowed \n        focus:outline-none focus:shadow-outline ".concat(R[a]," ").concat(null!==(t=e.className)&&void 0!==t?t:"")}))},D=r(19),W=r(73),S=function(e){var t=e.children;return Object(n.jsx)("div",{className:"w-full bg-gray-200 min-h-full",children:Object(n.jsxs)("div",{className:"max-w-4xl mx-auto text-gray-900 h-full",children:[t," "]})})},z=function(e){var t=e.children;return Object(n.jsx)("header",{className:"p-4",children:t})},T=function(e){return Object(n.jsx)("input",Object(i.a)(Object(i.a)({},e),{},{className:"shadow appearance-none border rounded py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline ".concat(e.className)}))},_=r(24),F=function(e,t){var r=e.history,n=e.clientId,a=e.roomId,s=e.rooms,c=e.updateRoomId,i=e.addToast;return Object(d.a)(l.a.mark((function e(){var o,d,u,j,b,h,m;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!a||!(null===s||void 0===s||null===(o=s.find((function(e){return e.id===a})))||void 0===o?void 0:o.gameStarted)){e.next=4;break}return r.push("/rooms/".concat(a)),i("There is a game going on.",{appearance:"info",autoDismiss:!0}),e.abrupt("return");case 4:if(n){e.next=6;break}return e.abrupt("return");case 6:return O("my room",{client:n}),e.next=9,v("my room response");case 9:(d=e.sent).success?(c(null!==(u=null===(j=d.result)||void 0===j?void 0:j.id)&&void 0!==u?u:null),!(null===(b=d.result)||void 0===b?void 0:b.id)||!(null===(h=d.result)||void 0===h?void 0:h.gameStarted)&&t||r.push("/rooms/".concat(null===(m=d.result)||void 0===m?void 0:m.id))):i(d.error,{appearance:"info",autoDismiss:!0});case 11:case"end":return e.stop()}}),e)})))};var B={Wrapper:function(e){var t=e.children;return Object(n.jsx)("div",{className:"overflow-x-auto bg-white rounded-lg shadow max-w-4xl m-auto box-content mx-4",children:Object(n.jsx)("table",{className:"border-collapse table-auto w-full whitespace-no-wrap bg-white table-striped relative",children:t})})},Head:function(e){var t=e.children;return Object(n.jsx)("thead",{children:t})},Body:function(e){var t=e.children;return Object(n.jsx)("tbody",{children:t})},Row:function(e){var t,r=e.children,a=Object(I.a)(e,["children"]);return Object(n.jsx)("tr",Object(i.a)(Object(i.a)({},a),{},{className:"text-left ".concat(null!==(t=a.className)&&void 0!==t?t:""),children:r}))},Data:function(e){var t,r=e.children,a=Object(I.a)(e,["children"]);return Object(n.jsx)("td",Object(i.a)(Object(i.a)({},a),{},{className:"border-dashed border-t border-gray-200 ".concat(null!==(t=a.className)&&void 0!==t?t:""),children:r}))},Header:function(e){var t,r=e.children,a=Object(I.a)(e,["children"]);return Object(n.jsx)("th",Object(i.a)(Object(i.a)({},a),{},{className:"py-2 px-3 sticky top-0 border-b text-gray-700 border-gray-200 bg-gray-100 ".concat(null!==(t=a.className)&&void 0!==t?t:""),children:r}))}},H=r(70),A=r(71),L=r(27),E=r(69),M=r(13);function J(e){return"/images/cards/".concat(e.startsWith("?")?"hidden":e.startsWith("*")?"bomb":e.startsWith("+")?"bonus".concat(e[1]):e,".png")}function G(e){if(e.startsWith("B"))return"".concat(parseInt(e.substring(1)),"\uc6d4 \uad11");if(e.startsWith("A"))return"".concat(parseInt(e.substring(1)),"\uc6d4 \uc5f4\ub057");if(e.startsWith("R")){var t=parseInt(e.substring(1)),r=[1,2,3].includes(t)?"\ud64d":[4,5,7].includes(t)?"\ucd08":[6,9,10].includes(t)?"\uccad":null;return"".concat(t,"\uc6d4 \ub760").concat(r?" (".concat(r,"\ub2e8)"):"")}if(e.startsWith("J")){var n=parseInt(e.substring(1,3)),a=parseInt(e.substring(3)),s=2===a||12===n?2:1;return"".concat(n,"\uc6d4 ").concat(2===s?"\uc30d":"","\ud53c").concat(2===s?"":" (".concat(a,")"))}if(e.startsWith("+")){var c=parseInt(e.substring(1));return"\ubcf4\ub108\uc2a4 ".concat(2===c?"\uc30d":"\uc4f0\ub9ac","\ud53c")}if(e.startsWith("*")){var i=parseInt(e.substring(1));return"\ud3ed\ud0c4 (".concat(i,")")}return"\uc228\uaca8\uc9c4 \ud328"}function P(e,t){var r=e.board.hands[t].length,n=e.board.hands[t].filter((function(r){return r.startsWith("*")||e.state.shaking_histories[t].flat().includes(r)}));return[].concat(Object(L.a)(n),Object(L.a)(Array(r-n.length).fill("?")))}r(156);var Y=function(e){var t,r=e.card,a=void 0===r?"?":r,s=e.anchorBottom,c=void 0!==s&&s,o=e.hoverEnabled,l=void 0===o||o,d=e.title,u=(e.children,Object(I.a)(e,["card","anchorBottom","hoverEnabled","title","children"]));return Object(n.jsx)("button",Object(i.a)(Object(i.a)({},u),{},{className:"".concat(l?"card-button":""," ").concat(null!==(t=e.className)&&void 0!==t?t:""," ").concat(c?"anchor-bottom":""," ").concat(l?"":"cursor-default"),children:Object(n.jsx)("img",{title:d,alt:d,src:J(a),className:"w-full h-full",style:{borderRadius:4}})}))},X={xs:"text-xs",sm:"text-sm",base:"text-base",lg:"text-lg",xl:"text-xl","2xl":"text-2xl"},q=function(e){var t,r=e.size,a=void 0===r?"base":r,s=Object(I.a)(e,["size"]);return Object(n.jsx)("button",Object(i.a)(Object(i.a)({},s),{},{className:"flex items-center justify-center p-3 rounded-full\n        disabled:bg-transparent hover:bg-gray-300 active:bg-gray-400 focus:bg-gray-400 \n        disabled:opacity-50 disabled:cursor-not-allowed \n        focus:outline-none focus:shadow-outline ".concat(X[a]," ").concat(null!==(t=e.className)&&void 0!==t?t:"")}))},K=function(e){var t=e.game,r=e.player,a=e.clientId,s=e.updateGame,c=(e.history,!!a&&t.players.includes(a)),i=Object(M.useToasts)().addToast;return Object(n.jsx)("div",{className:"w-full h-full flex place-items-center fixed z-10 top-0 left-0",style:{backgroundColor:"rgba(0, 0, 0, 0.45)"},children:Object(n.jsxs)("div",{className:"p-8 bg-white rounded-2xl w-2/3 text-center m-auto",children:[Object(n.jsx)("h2",{className:"font-black text-3xl text-gray-800 mb-3",children:null===t.state.winner?"\ud83e\udd14 \ub098\uac00\ub9ac":t.state.winner===r?"\ud83c\udf1f \uc2b9\ub9ac!":1-t.state.winner===r?"\ud83d\ude25 \ud328\ubc30...":"\ud83c\udfc6 ".concat(t.players[t.state.winner],"\uc758 \uc2b9\ub9ac!")}),Object(n.jsx)("p",{children:Object(n.jsx)("span",{className:"text-xl text-gray-800",children:null===t.state.winner?null:Object(n.jsxs)(n.Fragment,{children:["\ucd1d"," ",Object(n.jsx)("span",{className:"font-bold",children:t.state.scores[t.state.winner]}),"\uc810"]})})}),Object(n.jsx)("p",{children:Object(n.jsx)("span",{className:"text-md text-gray-800",children:null===t.state.winner?null:[{kind:"go-add",arg:t.state.go_histories[t.state.winner].length}].concat(Object(L.a)(t.state.score_factors[t.state.winner])).map((function(e){return"go-add"===e.kind?0===e.arg?null:"\uace0 ".concat(e.arg,"\uc810"):"go"===e.kind?e.arg<=2?null:"\uace0 ".concat(Math.pow(2,e.arg-2),"\ubc30"):"bright"===e.kind?0===e.arg?null:"\uad11 ".concat(e.arg,"\uc810"):"animal"===e.kind?e.arg<5?null:"\uc5f4\ub057 ".concat(e.arg-4,"\uc810"):"ribbon"===e.kind?e.arg<5?null:"\ub2e8 ".concat(e.arg-4,"\uc810"):"junk"===e.kind?e.arg<10?null:"\ud53c ".concat(e.arg-9,"\uc810"):"five birds"===e.kind?"\uace0\ub3c4\ub9ac 5\uc810":"red ribbons"===e.kind?"\ud64d\ub2e8 3\uc810":"blue ribbons"===e.kind?"\uccad\ub2e8 3\uc810":"plant ribbons"===e.kind?"\ucd08\ub2e8 3\uc810":"shaking"===e.kind?0===e.arg?null:"\ud754\ub4e4\uae30 ".concat(Math.pow(2,e.arg),"\ubc30"):"bright penalty"===e.kind?"\uad11\ubc15 2\ubc30":"animal penalty"===e.kind?"\uba4d\ub530 2\ubc30":"junk penalty"===e.kind?"\ud53c\ubc15 2\ubc30":"go penalty"===e.kind?"\uace0\ubc15 2\ubc30":"four of a month"===e.kind?"\ucd1d\ud1b5 10\uc810":"\uc4f0\ub9ac\ubed1 10\uc810"})).filter((function(e){return null!==e})).join(", ")})}),Object(n.jsx)("p",{children:c?Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)(q,{className:"m-auto mt-4",onClick:Object(d.a)(l.a.mark((function e(){var t,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(f){e.next=2;break}return e.abrupt("return");case 2:if(a){e.next=4;break}return e.abrupt("return");case 4:return s(null),O("end game",{client:a}),e.next=8,v("end game response");case 8:if((t=e.sent).success){e.next=12;break}return i(t.error,{appearance:"error",autoDismiss:!0}),e.abrupt("return");case 12:return O("start game",{client:a}),e.next=15,v("start game response");case 15:(r=e.sent).success||i(r.error,{appearance:"error",autoDismiss:!0});case 17:case"end":return e.stop()}}),e)}))),children:"\uc0c8 \uac8c\uc784 \ud558\uae30"}),Object(n.jsx)(q,{className:"m-auto mt-4",onClick:Object(d.a)(l.a.mark((function e(){var t,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(f){e.next=2;break}return e.abrupt("return");case 2:if(a){e.next=4;break}return e.abrupt("return");case 4:return s(null),O("end game",{client:a}),e.next=8,v("end game response");case 8:if((t=e.sent).success){e.next=12;break}return i(t.error,{appearance:"error",autoDismiss:!0}),e.abrupt("return");case 12:return O("start game",{client:a}),e.next=15,v("start game response");case 15:(r=e.sent).success||i(r.error,{appearance:"error",autoDismiss:!0});case 17:case"end":return e.stop()}}),e)}))),children:"\uc0c8 \uac8c\uc784 \ud558\uae30"})]}):null})]})})},Q=function(e){var t=e.game,r=e.player,s=e.clientId,c=1327+(null===r?-53:0),i=function(){var e=Object(a.useState)({width:32,height:32}),t=Object(_.a)(e,2),r=t[0],n=t[1];return Object(a.useEffect)((function(){function e(){n({width:window.innerWidth,height:window.innerHeight})}return window.addEventListener("resize",e),e(),function(){return window.removeEventListener("resize",e)}}),[]),r}(),o=Math.min((i.width-32)/1258,(i.height-32)/c),l=null!==r&&void 0!==r?r:1,d=0===l?1:0;return Object(n.jsxs)("div",{className:"m-auto",style:{width:1258*o+32,height:o*c+32,padding:16},children:[Object(n.jsx)($,{ratio:o,hand:P(t,d),clientId:s,turn:t.state.player===d}),Object(n.jsx)("div",{style:{height:32*o}}),Object(n.jsxs)("div",{className:"flex justify-center",style:{height:189*o},children:[Object(n.jsx)(U,{ratio:o,name:t.players[d]}),Object(n.jsx)(ee,{captureField:t.board.capture_fields[d],animal9Moved:t.state.animal_9_moved,ratio:o}),Object(n.jsx)(V,{ratio:o,score:t.state.scores[d],go:t.state.go_histories[d].length,stacking:t.state.stacking_histories[d].length,shaking:t.state.shaking_histories[d].length})]}),Object(n.jsx)("div",{style:{height:96*o}}),Object(n.jsx)(re,{centerField:t.board.center_field,ratio:o}),Object(n.jsx)("div",{style:{height:96*o}}),Object(n.jsxs)("div",{className:"flex justify-center",style:{height:189*o},children:[Object(n.jsx)(U,{ratio:o,name:t.players[l]}),Object(n.jsx)(ee,{captureField:t.board.capture_fields[l],animal9Moved:t.state.animal_9_moved,ratio:o}),Object(n.jsx)(V,{ratio:o,score:t.state.scores[l],go:t.state.go_histories[l].length,stacking:t.state.stacking_histories[l].length,shaking:t.state.shaking_histories[l].length})]}),Object(n.jsx)("div",{style:{height:32*o}}),Object(n.jsx)($,{ratio:o,hand:null!==r?t.board.hands[l]:P(t,l),mine:null!==r,actions:t.state.player===r?t.actions:[],clientId:s,turn:t.state.player===l})]})},U=function(e){var t=e.ratio,r=e.name;return Object(n.jsxs)("div",{style:{width:106*t,marginRight:40*t,height:90*t*1.618,fontSize:24*t,padding:8*t,lineHeight:1.1,borderRadius:8*t,backgroundColor:"#29604D",textAlign:"center",position:"relative"},className:"text-white",children:[Object(n.jsx)("div",{style:{height:90*t,backgroundColor:"white",borderRadius:8*t},children:Object(n.jsx)("img",{src:"https://i1.wp.com/similarpng.com/wp-content/plugins/userswp/assets/images/no_profile.png",style:{width:90*t,height:90*t,borderRadius:8*t},className:"object-cover object-center",alt:"".concat(r,"\uc758 \ud504\ub85c\ud544 \uc774\ubbf8\uc9c0")})}),Object(n.jsx)("div",{style:{position:"absolute",bottom:8*t,width:90*t},className:"truncate",children:r})]})},V=function(e){var t=e.ratio,r=e.score,a=e.go,s=e.stacking,c=e.shaking;return Object(n.jsxs)("div",{style:{width:106*t,marginLeft:40*t,height:90*t*1.618,fontSize:24*t,padding:8*t,lineHeight:1.1,borderRadius:8*t,backgroundColor:"#29604D",fontFamily:"sans-serif",textAlign:"left"},className:"text-white",children:[Object(n.jsxs)("div",{style:{fontSize:r>99999?"1em":r>9999?"1.1em":"1.3em",textAlign:"center",lineHeight:"".concat(48*t,"px"),whiteSpace:"nowrap",width:"min-content",marginLeft:"50%",transform:"translateX(-50%)",padding:"0 ".concat(8*t,"px"),borderRadius:8*t},className:"font-bold text-right",children:[r,"\uc810"]}),Object(n.jsxs)("div",{style:{marginLeft:15*t,width:60*t},children:["\ud83d\udd25 ",Object(n.jsx)("span",{className:"font-black float-right",children:a})]}),Object(n.jsxs)("div",{style:{marginLeft:15*t,width:60*t},children:["\ud83d\udca9 ",Object(n.jsx)("span",{className:"font-black float-right",children:s})]}),Object(n.jsxs)("div",{style:{marginLeft:15*t,width:60*t},children:["\ud83d\udd14 ",Object(n.jsx)("span",{className:"font-black float-right",children:c})]})]})},Z=function(e){var t=e.card,r=e.width,a=e.height,s=e.alt,c=e.title,o=e.style,l=void 0===o?{}:o,d=e.className,u=e.onClick,j=r||a?!r&&a?{width:68/105*a,height:a}:r&&!a?{width:r,height:105*r/68}:{width:r,height:a}:{width:68,height:105},b=j.width,h=j.height;return Object(n.jsx)("img",{src:J(t),style:Object(i.a)({width:b,height:h,objectPosition:"center",objectFit:"cover"},l),alt:null!==s&&void 0!==s?s:G(t),title:c,className:d,onClick:u})},$=function(e){var t=e.hand,r=e.mine,a=void 0!==r&&r,s=e.actions,c=void 0===s?[]:s,o=e.ratio,u=e.style,j=void 0===u?{}:u,b=e.turn,h=e.clientId,m=Object(M.useToasts)().addToast,p=a?100*o:68*o,x=a?154*o:105*o,O=a?12*o:8*o;return Object(n.jsxs)("div",{className:"flex w-full place-content-center",children:[Object(n.jsx)("div",{style:{width:a?54*o:40*o,height:x+2*O,lineHeight:1},className:"flex items-center",children:b&&t.length>0&&Object(n.jsx)(E.a,{size:a?40*o:32*o,color:"white"})}),Object(n.jsx)("div",{className:"flex",style:Object(i.a)({padding:O/2,backgroundColor:0===t.length?"transparent":"#29604D",borderRadius:8*o,marginRight:a?54*o:40*o,minWidth:16*o+2*O,height:x+2*O},j),children:t.map((function(e,t){var r=a?c.find((function(t){return"throw"===t.kind&&t.card===e||"throw bomb"===t.kind&&e.startsWith("*")||"bomb"===t.kind&&["B","A","R","J"].includes(e[0])&&t.month===parseInt(e.substring(1,3),10)||"shakable"===t.kind&&t.card===e})):void 0,s=r?"throw"===r.kind?"".concat(G(e)," \ub0b4\uae30"):"throw bomb"===r.kind?"\ud3ed\ud0c4 \ub0b4\uae30":"bomb"===r.kind?"".concat(r.month,"\uc6d4 \ud3ed\ud0c4"):"".concat(G(e),"\ub85c ").concat(parseInt(e.substring(1,3),10),"\uc6d4 \ud754\ub4e4\uae30"):void 0;return Object(n.jsx)(Y,{card:e,style:{width:p,margin:O/2,borderRadius:4*o},title:s,hoverEnabled:a,anchorBottom:!0,className:a?0===c.length?"cursor-not-allowed":"cursor-pointer":"",onClick:a?Object(d.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r){e.next=2;break}return e.abrupt("return");case 2:return f.emit("play",{client:h,action:r}),e.next=5,v("play response");case 5:(t=e.sent).success||m(t.error,{appearance:"error",autoDismiss:!0});case 7:case"end":return e.stop()}}),e)}))):void 0},t)}))})]})},ee=function(e){var t=e.captureField,r=e.animal9Moved,a=e.ratio,s=(e.style,t.filter((function(e){return e.startsWith("B")}))),c=t.filter((function(e){return e.startsWith("A")&&(!r||"A09"!==e)})),i=c.includes("A02")&&c.includes("A04")&&c.includes("A08"),o=Math.max(c.length-4,0)+(i?5:0),l=t.filter((function(e){return e.startsWith("R")})),d=l.includes("R01")&&l.includes("R02")&&l.includes("R03"),u=l.includes("R04")&&l.includes("R05")&&l.includes("R07"),j=l.includes("R06")&&l.includes("R09")&&l.includes("R10"),b=Math.max(l.length-4,0)+(j?3:0)+(u?3:0)+(d?3:0),h=t.filter((function(e){return e.startsWith("J")||e.startsWith("+")||!!r&&"A09"===e})),m=h.map((function(e){return e.startsWith("J")?"J110"===e||"J111"===e?1:"J120"===e||"J112"===e?2:1:"A09"===e||"+2"===e?2:"+3"===e?3:0})).reduce((function(e,t){return e+t}),0);return Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)(te,{pile:s,sizeOfChunk:5,ratio:a,style:{marginRight:40*a},number:s.length<3?s.length:5===s.length?15:4===s.length?4:s.includes("B12")?2:3,isScore:s.length>=3}),Object(n.jsx)(te,{pile:c,ratio:a,style:{marginRight:40*a},number:o>0?o:c.length,isScore:o>0}),Object(n.jsx)(te,{pile:l,ratio:a,style:{marginRight:40*a},number:b>0?b:l.length,isScore:b>0}),Object(n.jsx)(te,{pile:h,sizeOfChunk:8,ratio:a,style:{marginRight:40*a},number:m>9?m-9:m,isScore:m>9})]})},te=function(e){var t=e.pile,r=e.ratio,a=e.number,s=e.isScore,c=e.sizeOfChunk,o=void 0===c?3:c,l=e.style,d=void 0===l?{}:l,u=68*r,j=105*r,b=24*r,h=28*r,m=Math.ceil(t.length/o),p=u+(o-1)*b,x=j+(m-1)*h,f=t.length-1;return Object(n.jsxs)("div",{style:Object(i.a)({width:p,height:x,position:"relative"},d),children:[t.map((function(e,t){return Object(n.jsx)(Z,{card:e,width:u,style:{position:"absolute",left:t%o*b,top:Math.floor(t/o)*h,borderRadius:4*r}},t)})),0===t.length?null:Object(n.jsx)("div",{className:"absolute",style:{width:40*r,height:40*r,left:f%o*b+u-40*r,top:Math.floor(f/o)*h+j-40*r,backgroundColor:"white",border:"".concat(4*r,"px solid ").concat(s?"#262C34":"#4f5257"),color:s?"#262C34":"#65676b",fontWeight:s?"bold":"normal",borderRadius:8*r,fontSize:28*r,lineHeight:"".concat(32*r,"px"),textAlign:"center"},children:a})]})},re=function(e){var t=e.centerField,r=e.ratio,a=e.style,s=void 0===a?{}:a;return Object(n.jsxs)("div",{className:"flex",style:Object(i.a)({height:392*r},s),children:[Object(n.jsxs)("div",{className:"flex flex-wrap justify-between",style:{height:446*r,width:428*r},children:[Object(n.jsx)(ne,{field:t[1],ratio:r}),Object(n.jsx)(ne,{field:t[2],ratio:r}),Object(n.jsx)(ne,{field:t[3],ratio:r}),Object(n.jsx)(ne,{field:t[7],ratio:r}),Object(n.jsx)(ne,{field:t[8],ratio:r}),Object(n.jsx)(ne,{field:t[9],ratio:r})]}),Object(n.jsx)("div",{className:"flex justify-center items-center",style:{height:392*r,width:290*r},children:Object(n.jsx)(Z,{card:"?",width:90*r,style:{borderRadius:8*r}})}),Object(n.jsxs)("div",{className:"flex flex-wrap justify-between",style:{height:446*r,width:428*r},children:[Object(n.jsx)(ne,{field:t[4],ratio:r}),Object(n.jsx)(ne,{field:t[5],ratio:r}),Object(n.jsx)(ne,{field:t[6],ratio:r}),Object(n.jsx)(ne,{field:t[10],ratio:r}),Object(n.jsx)(ne,{field:t[11],ratio:r}),Object(n.jsx)(ne,{field:t[12],ratio:r})]})]})},ne=function(e){var t=e.field,r=void 0===t?[]:t,a=e.ratio,s=(e.style,r.length<=3?1:4===r.length?2/3:.5);return Object(n.jsx)("div",{className:"relative",style:{height:180*a,width:122*a},children:r.map((function(e,t){return Object(n.jsx)(Z,{card:e,width:90*a,style:{position:"absolute",top:20*t*s*a,left:16*t*s*a,borderRadius:8*a}},t)}))})},ae=function(e){var t=e.game,r=e.player,a=e.clientId,s=e.updateGame,c=Object(I.a)(e,["game","player","clientId","updateGame"]);return Object(n.jsxs)("div",{className:"w-full h-full flex place-items-center",style:{backgroundColor:"#3B7157"},children:[Object(n.jsx)(Q,{game:t,player:r,clientId:a}),t.state.ended?Object(n.jsx)(K,Object(i.a)({game:t,player:r,clientId:a,updateGame:s},c)):null]})},se=Object(b.connect)((function(e){return e}),p)((function(e){var t=e.id,r=e.updateGame,s=e.game,c=e.clientId,o=Object(I.a)(e,["id","updateGame","game","clientId"]),u=Object(M.useToasts)().addToast;Object(a.useEffect)((function(){var e=function(e){e.success&&r(e.result)};return O("spectate game",{room:t}),w("spectate game response",e),function(){return k("spectate game response",e)}}),[t,r]);var j=s&&s.players[s.state.player]===c,b=Object(a.useState)(!1),h=Object(_.a)(b,2),p=h[0],x=h[1],g=Object(a.useState)(!1),y=Object(_.a)(g,2),R=y[0],D=y[1],W=Object(a.useState)(null),S=Object(_.a)(W,2),z=S[0],T=S[1];m()(Object(d.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(f){e.next=2;break}return e.abrupt("return");case 2:if(s){e.next=4;break}return e.abrupt("return");case 4:if(j){e.next=6;break}return e.abrupt("return");case 6:if(Object.values(s.flags).some((function(e){return e}))){e.next=8;break}return e.abrupt("return");case 8:s.flags.go?(D(!0),T(Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)("h2",{className:"font-black text-xl text-gray-800 mb-3",children:"\uace0 \ud558\uc2dc\uaca0\uc2b5\ub2c8\uae4c?"}),Object(n.jsxs)("div",{className:"flex justify-center",children:[Object(n.jsx)(q,{style:{minWidth:"3em",marginRight:"2em"},onClick:Object(d.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return O("play",{client:c,action:{kind:"go",option:!0}}),e.next=3,v("play response");case 3:(t=e.sent).success?(r(t.result),D(!1)):u(t.error,{appearance:"error",autoDismiss:!0});case 5:case"end":return e.stop()}}),e)}))),children:Object(n.jsx)("span",{children:"\uace0"})}),Object(n.jsx)(q,{onClick:Object(d.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return O("play",{client:c,action:{kind:"go",option:!1}}),e.next=3,v("play response");case 3:(t=e.sent).success?(r(t.result),D(!1)):u(t.error,{appearance:"error",autoDismiss:!0});case 5:case"end":return e.stop()}}),e)}))),children:Object(n.jsx)("span",{children:"\uc2a4\ud1b1"})})]})]}))):s.flags.shaking?(D(!0),T(Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)("h2",{className:"font-black text-xl text-gray-800 mb-3",children:"\ud754\ub4dc\uc2dc\uaca0\uc2b5\ub2c8\uae4c?"}),Object(n.jsxs)("div",{className:"flex justify-center",children:[Object(n.jsx)(q,{style:{minWidth:"3em",marginRight:"2em"},onClick:Object(d.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return O("play",{client:c,action:{kind:"shaking",option:!0}}),e.next=3,v("play response");case 3:(t=e.sent).success?(r(t.result),D(!1)):u(t.error,{appearance:"error",autoDismiss:!0});case 5:case"end":return e.stop()}}),e)}))),children:Object(n.jsx)("span",{children:"\ub124"})}),Object(n.jsx)(q,{onClick:Object(d.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return O("play",{client:c,action:{kind:"shaking",option:!1}}),e.next=3,v("play response");case 3:(t=e.sent).success?(r(t.result),D(!1)):u(t.error,{appearance:"error",autoDismiss:!0});case 5:case"end":return e.stop()}}),e)}))),children:Object(n.jsx)("span",{children:"\uc544\ub2c8\uc694"})})]})]}))):s.flags.select_match?(D(!0),T(Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)("h2",{className:"font-black text-xl text-gray-800 mb-3",children:"\uac00\uc838\uc62c \ud328\ub97c \uace8\ub77c\uc8fc\uc138\uc694."}),Object(n.jsx)("div",{style:{maxWidth:"calc(80% + 2em)",margin:"auto",marginTop:"2em"},children:Object(n.jsxs)("div",{className:"flex justify-between",style:{maxWidth:"14em",margin:"auto"},children:[Object(n.jsx)(Y,{card:s.actions[0].match,style:{maxWidth:"6em",width:"40%"},onClick:Object(d.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return O("play",{client:c,action:{kind:"select match",match:s.actions[0].match}}),e.next=3,v("play response");case 3:(t=e.sent).success?(r(t.result),D(!1)):u(t.error,{appearance:"error",autoDismiss:!0});case 5:case"end":return e.stop()}}),e)})))}),Object(n.jsx)(Y,{card:s.actions[1].match,style:{maxWidth:"6em",width:"40%"},onClick:Object(d.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return O("play",{client:c,action:{kind:"select match",match:s.actions[1].match}}),e.next=3,v("play response");case 3:(t=e.sent).success?(r(t.result),D(!1)):u(t.error,{appearance:"error",autoDismiss:!0});case 5:case"end":return e.stop()}}),e)})))})]})})]}))):s.flags.move_animal_9?(D(!0),T(Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)("h2",{className:"font-black text-xl text-gray-800 mb-3",children:"9\uc6d4 \uc5f4\ub057\uc744 \uc30d\ud53c\ub85c \uc62e\uae38\uae4c\uc694?"}),Object(n.jsxs)("div",{className:"flex justify-center",children:[Object(n.jsx)(q,{style:{minWidth:"3em",marginRight:"2em"},onClick:Object(d.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return O("play",{client:c,action:{kind:"move animal 9",option:!0}}),e.next=3,v("play response");case 3:(t=e.sent).success?(r(t.result),D(!1)):u(t.error,{appearance:"error",autoDismiss:!0});case 5:case"end":return e.stop()}}),e)}))),children:Object(n.jsx)("span",{children:"\ub124"})}),Object(n.jsx)(q,{onClick:Object(d.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return O("play",{client:c,action:{kind:"move animal 9",option:!1}}),e.next=3,v("play response");case 3:(t=e.sent).success?(r(t.result),D(!1)):u(t.error,{appearance:"error",autoDismiss:!0});case 5:case"end":return e.stop()}}),e)}))),children:Object(n.jsx)("span",{children:"\uc544\ub2c8\uc694"})})]})]}))):s.flags.four_of_a_month&&(D(!0),T(Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)("h2",{className:"font-black text-xl text-gray-800 mb-3",children:"\ucd1d\ud1b5\uc73c\ub85c \uac8c\uc784\uc744 \ub05d\ub0bc\uae4c\uc694?"}),Object(n.jsxs)("div",{className:"flex justify-center",children:[Object(n.jsx)(q,{style:{minWidth:"3em",marginRight:"2em"},onClick:Object(d.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return O("play",{client:c,action:{kind:"four of a month",option:!0}}),e.next=3,v("play response");case 3:(t=e.sent).success?(r(t.result),D(!1)):u(t.error,{appearance:"error",autoDismiss:!0});case 5:case"end":return e.stop()}}),e)}))),children:Object(n.jsx)("span",{children:"\ub124"})}),Object(n.jsx)(q,{onClick:Object(d.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return O("play",{client:c,action:{kind:"four of a month",option:!1}}),e.next=3,v("play response");case 3:(t=e.sent).success?(r(t.result),D(!1)):u(t.error,{appearance:"error",autoDismiss:!0});case 5:case"end":return e.stop()}}),e)}))),children:Object(n.jsx)("span",{children:"\uc544\ub2c8\uc694"})})]})]})));case 9:case"end":return e.stop()}}),e)}))),[f,s,r]);var F=null===s||void 0===s?void 0:s.players.findIndex((function(e){return e===c})),B=!!c&&(null===s||void 0===s?void 0:s.players.includes(c));return null===s?Object(n.jsx)("div",{className:"w-full h-full",children:Object(n.jsx)(N.BlockLoading,{})}):Object(n.jsxs)("div",{className:"w-full h-full",children:[Object(n.jsx)("div",{className:"fixed z-50",children:B&&Object(n.jsx)(q,{size:"sm",onClick:Object(d.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(f){e.next=2;break}return e.abrupt("return");case 2:if(c){e.next=4;break}return e.abrupt("return");case 4:return f.emit("end game",{client:c}),e.next=7,v("end game response");case 7:(t=e.sent).success||u(t.error,{appearance:"error",autoDismiss:!0});case 9:case"end":return e.stop()}}),e)}))),children:"End Game"})}),Object(n.jsx)("div",{className:"fixed z-30 right-0 top-0",children:Object(n.jsx)(C,{onClick:function(){x((function(e){return!e}))},children:p?Object(n.jsx)(H.a,{}):Object(n.jsx)(A.a,{})})}),p&&Object(n.jsx)("div",{className:"fixed right-0 top-0 text-xs max-w-md overflow-y-auto z-20 bg-white bg-opacity-75 p-4 rounded-xl",style:{maxHeight:"10rem"},children:Object(n.jsx)("pre",{className:"max-w-md break-all whitespace-pre-wrap",children:s.logs.join("\n")})}),Object(n.jsx)(ae,Object(i.a)({game:s,player:-1===F?null:F,clientId:c,updateGame:r},o)),R&&Object(n.jsx)("div",{className:"w-full h-full flex place-items-center fixed z-10 top-0 left-0",style:{backgroundColor:"rgba(0, 0, 0, 0.45)"},children:Object(n.jsx)("div",{className:"p-8 bg-white rounded-2xl w-2/3 text-center m-auto",children:z})})]})})),ce=Object(b.connect)((function(e){return e}),p)((function(e){var t,r=e.match,a=e.rooms,s=e.clientId,c=e.updateClientId,i=e.roomId,o=e.history,u=e.updateRoomId,b=Object(M.useToasts)().addToast,h=null!==(t=null===a||void 0===a?void 0:a.find((function(e){return e.id===r.params.roomId})))&&void 0!==t?t:null;return null===a?Object(n.jsx)(S,{children:Object(n.jsx)(N.BlockLoading,{})}):h?h.gameStarted?Object(n.jsx)(se,{id:r.params.roomId}):Object(n.jsxs)(S,{children:[Object(n.jsx)(z,{children:Object(n.jsxs)("div",{className:"flex",children:[Object(n.jsx)(C,{className:"mr-4",onClick:function(){return o.push("/")},children:Object(n.jsx)(D.a,{})}),Object(n.jsx)(T,{className:"w-64 my-1",placeholder:"Client ID",value:null!==s&&void 0!==s?s:"",onChange:function(e){c(e.target.value)}}),i&&Object(n.jsx)(C,{className:"ml-4",onClick:F({history:o,clientId:s,roomId:i,rooms:a,updateRoomId:u,addToast:b},!1),children:Object(n.jsx)(D.b,{})})]})}),Object(n.jsxs)("main",{children:[Object(n.jsxs)("h2",{className:"p-4 font-bold text-3xl text-gray-800 inline-flex",children:["Room ",r.params.roomId,i===r.params.roomId&&s&&Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)(C,{onClick:Object(d.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return O("start game",{client:s}),e.next=3,v("start game response");case 3:(t=e.sent).success||b(t.error,{appearance:"error",autoDismiss:!0});case 5:case"end":return e.stop()}}),e)}))),className:"ml-4",children:Object(n.jsx)(W.a,{})}),Object(n.jsx)(C,{onClick:Object(d.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return O("exit room",{client:s}),e.next=3,v("exit room response");case 3:(t=e.sent).success?setTimeout((function(){o.replace("/")}),300):b(t.error,{appearance:"error",autoDismiss:!0});case 5:case"end":return e.stop()}}),e)}))),className:"ml-4",children:Object(n.jsx)(D.c,{})})]}),i!==r.params.roomId&&s&&Object(n.jsx)(n.Fragment,{children:Object(n.jsx)(C,{onClick:Object(d.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return O("join room",{client:s,room:r.params.roomId}),e.next=3,v("join room response");case 3:(t=e.sent).success?u(h.id):b(t.error,{appearance:"error",autoDismiss:!0});case 5:case"end":return e.stop()}}),e)}))),className:"ml-4",children:Object(n.jsx)(D.b,{})})})]}),Object(n.jsxs)(B.Wrapper,{children:[Object(n.jsx)(B.Head,{children:Object(n.jsx)(B.Row,{children:Object(n.jsx)(B.Header,{children:"Player ID"})})}),Object(n.jsx)(B.Body,{children:null===a?Object(n.jsx)(B.Row,{children:Object(n.jsx)(B.Data,{className:"w-full",colSpan:3,children:Object(n.jsx)("div",{className:"h-24 relative",children:Object(n.jsx)(N.BlockLoading,{})})})}):a.find((function(e){return e.id===r.params.roomId})).players.map((function(e){return Object(n.jsx)(B.Row,{children:Object(n.jsx)(B.Data,{className:"w-1/2",children:Object(n.jsx)("span",{className:"text-gray-700 px-6 py-3 flex items-center",children:e})})},e)}))})]})]})]}):Object(n.jsx)(j.a,{to:"/"})})),ie=r(74),oe=Object(b.connect)((function(e){return e}),p)((function(e){var t=e.history,r=e.clientId,a=e.roomId,s=e.rooms,c=e.updateRoomId,i=e.updateClientId,o=Object(M.useToasts)().addToast;return m()(F({history:t,clientId:r,roomId:a,rooms:s,updateRoomId:c,addToast:o},!0),[a,r,t,s,c]),Object(n.jsxs)(S,{children:[Object(n.jsx)(z,{children:Object(n.jsxs)("div",{className:"flex",children:[Object(n.jsx)(C,{className:"mr-4",onClick:function(){return t.push("/")},children:Object(n.jsx)(D.a,{})}),Object(n.jsx)(T,{className:"w-64 my-1",placeholder:"Client ID",value:null!==r&&void 0!==r?r:"",onChange:function(e){i(e.target.value)}}),a&&Object(n.jsx)(C,{className:"ml-4",onClick:F({history:t,clientId:r,roomId:a,rooms:s,updateRoomId:c,addToast:o},!1),children:Object(n.jsx)(D.b,{})})]})}),Object(n.jsxs)("main",{children:[Object(n.jsx)("h2",{className:"p-4 font-bold text-3xl text-gray-800",children:"Rooms"}),Object(n.jsxs)(B.Wrapper,{children:[Object(n.jsx)(B.Head,{children:Object(n.jsxs)(B.Row,{children:[Object(n.jsx)(B.Header,{children:"Room ID"}),Object(n.jsx)(B.Header,{children:"# of Players"}),Object(n.jsx)(B.Header,{})]})}),Object(n.jsxs)(B.Body,{children:[null===s?Object(n.jsx)(B.Row,{children:Object(n.jsx)(B.Data,{className:"w-full",colSpan:3,children:Object(n.jsx)("div",{className:"h-24 relative",children:Object(n.jsx)(N.BlockLoading,{})})})}):s.map((function(e){return Object(n.jsxs)(B.Row,{children:[Object(n.jsx)(B.Data,{className:"w-1/2",children:Object(n.jsx)("span",{className:"text-gray-700 px-6 py-3 flex items-center",children:e.id})}),Object(n.jsx)(B.Data,{className:"w-1/4",children:Object(n.jsxs)("span",{className:"text-gray-700 px-6 py-3 flex items-center",children:[e.players.length,"/2"]})}),Object(n.jsxs)(B.Data,{className:"p-2 flex justify-end",children:[Object(n.jsx)(C,{onClick:Object(d.a)(l.a.mark((function n(){var s;return l.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!a){n.next=3;break}return o("You are already in a different room.",{appearance:"error",autoDismiss:!0}),n.abrupt("return");case 3:if(r){n.next=6;break}return o("You did not set the clientId yet.",{appearance:"error",autoDismiss:!0}),n.abrupt("return");case 6:return O("join room",{client:r,room:e.id}),n.next=9,v("join room response");case 9:(s=n.sent).success?(c(e.id),t.push("/rooms/".concat(e.id))):o(s.error,{appearance:"error",autoDismiss:!0});case 11:case"end":return n.stop()}}),n)}))),children:Object(n.jsx)(D.b,{})}),Object(n.jsx)(C,{onClick:function(){t.push("/rooms/".concat(e.id))},children:Object(n.jsx)(ie.a,{})})]})]},e.id)})),Object(n.jsx)(B.Row,{children:Object(n.jsx)(B.Data,{className:"w-full",colSpan:3,children:Object(n.jsx)("div",{className:"h-24 flex items-center justify-center",children:Object(n.jsx)("button",{className:"w-40 bg-white tracking-wide text-gray-800 font-bold rounded border-b-2 border-blue-500 hover:border-blue-600 hover:bg-blue-500 hover:text-white shadow-md py-2 px-6 inline-flex items-center m-auto",onClick:Object(d.a)(l.a.mark((function e(){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!a){e.next=3;break}return o("You are already in a different room.",{appearance:"error",autoDismiss:!0}),e.abrupt("return");case 3:if(r){e.next=6;break}return o("You did not set the clientId yet.",{appearance:"error",autoDismiss:!0}),e.abrupt("return");case 6:return O("make room",{client:r}),e.next=9,v("make room response");case 9:(n=e.sent).success?(c(n.result.id),setTimeout((function(){t.push("/rooms/".concat(n.result.id))}),200)):o(n.error,{appearance:"error",autoDismiss:!0});case 11:case"end":return e.stop()}}),e)}))),children:Object(n.jsx)("span",{className:"mx-auto",children:"Make a room"})})})})})]})]})]})]})}));function le(e,t){if(!e)throw new Error(t)}var de=Object(b.connect)((function(e){return e}),p)((function(){return Object(n.jsx)(S,{children:Object(n.jsx)("div",{className:"flex w-full h-screen text-center place-items-center place-content-center",children:Object(n.jsx)("span",{className:"text-gray-500 font-bold",style:{fontSize:"10em"},children:"\u2204"})})})})),ue=Object(b.connect)((function(e){return e}),p)((function(e){var t=e.clientId,r=e.updateClientId,s=e.updateRoomId,c=e.updateRooms,o=Object(M.useToasts)().addToast;return m()(Object(d.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(f){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,v("connect response");case 4:if((t=e.sent).success)try{le(t.message.split(" ")[1].slice(0,-1)===f.id),console.log("connected!")}catch(r){o("Socket id does not match",{appearance:"error",autoDismiss:!0})}else o(t.error,{appearance:"error",autoDismiss:!0});case 6:case"end":return e.stop()}}),e)}))),[f.connected]),Object(a.useEffect)((function(){var e;r(null!==(e=localStorage.getItem("clientId"))&&void 0!==e?e:"")}),[r]),m()(Object(d.a)(l.a.mark((function e(){var r,n,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return");case 2:return O("my room",{client:t}),e.next=5,v("my room response");case 5:(r=e.sent).success?s(null!==(n=null===(a=r.result)||void 0===a?void 0:a.id)&&void 0!==n?n:null):o(r.error,{appearance:"error",autoDismiss:!0});case 7:case"end":return e.stop()}}),e)}))),[t]),Object(a.useEffect)((function(){O("list rooms",{});var e=function(e){e.success&&c(e.result)};return w("list rooms response",e),function(){k("list rooms response",e)}}),[c]),Object(n.jsx)(u.a,{children:Object(n.jsxs)(j.d,{children:[Object(n.jsx)(j.b,{path:"/rooms/:roomId",component:ce}),Object(n.jsx)(j.b,{path:"/rooms",render:function(){return Object(n.jsx)(j.a,{to:"/"})}}),Object(n.jsx)(j.b,{exact:!0,path:"/",render:function(e){return Object(n.jsx)(oe,Object(i.a)({},e))}}),Object(n.jsx)(j.b,{path:"/",render:function(e){return Object(n.jsx)(de,Object(i.a)({},e))}})]})})})),je=function(e){e&&e instanceof Function&&r.e(3).then(r.bind(null,159)).then((function(t){var r=t.getCLS,n=t.getFID,a=t.getFCP,s=t.getLCP,c=t.getTTFB;r(e),n(e),a(e),s(e),c(e)}))},be=r(75),he=r.n(be)()({clientId:null,rooms:null,roomId:null,game:null});c.a.render(Object(n.jsx)(b.Provider,{store:he,children:Object(n.jsx)(M.ToastProvider,{children:Object(n.jsx)(ue,{})})}),document.getElementById("root")),je()},83:function(e,t,r){}},[[158,1,2]]]);
//# sourceMappingURL=main.1641b03a.chunk.js.map