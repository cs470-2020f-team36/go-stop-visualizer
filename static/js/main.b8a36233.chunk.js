(this["webpackJsonpgo-stop-visualizer"]=this["webpackJsonpgo-stop-visualizer"]||[]).push([[0],{100:function(e,t,a){},127:function(e,t){},173:function(e,t,a){},180:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a(2),c=a(24),s=a.n(c),i=(a(100),a(7)),o=a(3),l=a.n(o),d=a(6),u=a(22),h=a(55),m=a(10),b=a(15),j=a(25),p=a.n(j),f=function(e){return{updateClientId:function(e,t){return localStorage.setItem("clientId",t),{clientId:t}},updateRooms:function(e,t){return{rooms:t}},updateRoomId:function(e,t){return{roomId:t}},updateGame:function(e,t){return{game:t}}}},x=a(78),k=a.n(x)()("https://cs470-go-stop.herokuapp.com/");function g(e,t){return O.apply(this,arguments)}function O(){return(O=Object(d.a)(l.a.mark((function e(t,a){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:k.emit(t,a);case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function v(e){return w.apply(this,arguments)}function w(){return(w=Object(d.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e){k.once(t,(function(t){e(t)}))})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function y(e,t){k.on(e,t)}function N(e,t){k.off(e,t)}var J=a(26),I=a(12),R={sm:"text-xl",base:"text-2xl",lg:"text-4xl"},C=function(e){var t,a=e.size,r=void 0===a?"base":a,c=e.dark,s=void 0!==c&&c,o=Object(I.a)(e,["size","dark"]);return Object(n.jsx)("button",Object(i.a)(Object(i.a)({},o),{},{className:"flex items-center justify-center p-3 rounded-full\n        disabled:bg-transparent disabled:opacity-50 disabled:cursor-not-allowed \n        focus:outline-none focus:shadow-outline ".concat(R[r]," ").concat(null!==(t=e.className)&&void 0!==t?t:""," ").concat(s?"text-white bg-opacity-15 hover:bg-opacity-35 bg-white":"bg-opacity-25 hover:bg-opacity-50 text-gray-800 bg-gray-400")}))},A=a(21),D=a(87),S=function(e){var t=e.children;return Object(n.jsx)("div",{className:"w-full bg-gray-200 min-h-full",children:Object(n.jsxs)("div",{className:"max-w-4xl mx-auto text-gray-900 h-full",children:[t," "]})})},W=function(e){var t=e.children,a=e.style;return Object(n.jsx)("header",{className:"p-4",style:a,children:t})},B=function(e){return Object(n.jsx)("input",Object(i.a)(Object(i.a)({},e),{},{className:"shadow appearance-none border rounded py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline ".concat(e.className)}))},T=a(23),z=function(e,t){var a=e.history,n=e.clientId,r=e.roomId,c=e.rooms,s=e.updateRoomId,i=e.addToast;return Object(d.a)(l.a.mark((function e(){var o,d,u,h,m,b,j;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!r||!(null===c||void 0===c||null===(o=c.find((function(e){return e.id===r})))||void 0===o?void 0:o.gameStarted)){e.next=4;break}return a.push("/rooms/".concat(r)),i("There is a game going on.",{appearance:"info",autoDismiss:!0}),e.abrupt("return");case 4:if(n){e.next=6;break}return e.abrupt("return");case 6:return g("my room",{client:n}),e.next=9,v("my room response");case 9:(d=e.sent).success?(s(null!==(u=null===(h=d.result)||void 0===h?void 0:h.id)&&void 0!==u?u:null),!(null===(m=d.result)||void 0===m?void 0:m.id)||!(null===(b=d.result)||void 0===b?void 0:b.gameStarted)&&t||a.push("/rooms/".concat(null===(j=d.result)||void 0===j?void 0:j.id))):i(d.error,{appearance:"info",autoDismiss:!0});case 11:case"end":return e.stop()}}),e)})))};var F={Wrapper:function(e){var t=e.children;return Object(n.jsx)("div",{className:"overflow-x-auto bg-white rounded-lg shadow max-w-4xl m-auto box-content mx-4",children:Object(n.jsx)("table",{className:"border-collapse table-auto w-full whitespace-no-wrap bg-white table-striped relative",children:t})})},Head:function(e){var t=e.children;return Object(n.jsx)("thead",{children:t})},Body:function(e){var t=e.children;return Object(n.jsx)("tbody",{children:t})},Row:function(e){var t,a=e.children,r=Object(I.a)(e,["children"]);return Object(n.jsx)("tr",Object(i.a)(Object(i.a)({},r),{},{className:"text-left ".concat(null!==(t=r.className)&&void 0!==t?t:""),children:a}))},Data:function(e){var t,a=e.children,r=Object(I.a)(e,["children"]);return Object(n.jsx)("td",Object(i.a)(Object(i.a)({},r),{},{className:"border-dashed border-t border-gray-200 ".concat(null!==(t=r.className)&&void 0!==t?t:""),children:a}))},Header:function(e){var t,a=e.children,r=Object(I.a)(e,["children"]);return Object(n.jsx)("th",Object(i.a)(Object(i.a)({},r),{},{className:"py-2 px-3 sticky top-0 border-b text-gray-700 border-gray-200 bg-gray-100 ".concat(null!==(t=r.className)&&void 0!==t?t:""),children:a}))}},_=a(59),H=a(58),E=a(85),L=a(181),M=a(84),G=a(13),P=[{kind:"throw",card:"B01"},{kind:"throw",card:"R01"},{kind:"throw",card:"J010"},{kind:"throw",card:"J011"},{kind:"throw",card:"A02"},{kind:"throw",card:"R02"},{kind:"throw",card:"J020"},{kind:"throw",card:"J021"},{kind:"throw",card:"B03"},{kind:"throw",card:"R03"},{kind:"throw",card:"J030"},{kind:"throw",card:"J031"},{kind:"throw",card:"A04"},{kind:"throw",card:"R04"},{kind:"throw",card:"J040"},{kind:"throw",card:"J041"},{kind:"throw",card:"A05"},{kind:"throw",card:"R05"},{kind:"throw",card:"J050"},{kind:"throw",card:"J051"},{kind:"throw",card:"A06"},{kind:"throw",card:"R06"},{kind:"throw",card:"J060"},{kind:"throw",card:"J061"},{kind:"throw",card:"A07"},{kind:"throw",card:"R07"},{kind:"throw",card:"J070"},{kind:"throw",card:"J071"},{kind:"throw",card:"B08"},{kind:"throw",card:"A08"},{kind:"throw",card:"J080"},{kind:"throw",card:"J081"},{kind:"throw",card:"A09"},{kind:"throw",card:"R09"},{kind:"throw",card:"J090"},{kind:"throw",card:"J091"},{kind:"throw",card:"A10"},{kind:"throw",card:"R10"},{kind:"throw",card:"J100"},{kind:"throw",card:"J101"},{kind:"throw",card:"B11"},{kind:"throw",card:"J110"},{kind:"throw",card:"J111"},{kind:"throw",card:"J112"},{kind:"throw",card:"B12"},{kind:"throw",card:"A12"},{kind:"throw",card:"R12"},{kind:"throw",card:"J120"},{kind:"throw",card:"+2"},{kind:"throw",card:"+3"},{kind:"throw bomb"},{kind:"bomb",month:1},{kind:"bomb",month:2},{kind:"bomb",month:3},{kind:"bomb",month:4},{kind:"bomb",month:5},{kind:"bomb",month:6},{kind:"bomb",month:7},{kind:"bomb",month:8},{kind:"bomb",month:9},{kind:"bomb",month:10},{kind:"bomb",month:11},{kind:"bomb",month:12},{kind:"shakable",card:"B01"},{kind:"shakable",card:"R01"},{kind:"shakable",card:"J010"},{kind:"shakable",card:"J011"},{kind:"shakable",card:"A02"},{kind:"shakable",card:"R02"},{kind:"shakable",card:"J020"},{kind:"shakable",card:"J021"},{kind:"shakable",card:"B03"},{kind:"shakable",card:"R03"},{kind:"shakable",card:"J030"},{kind:"shakable",card:"J031"},{kind:"shakable",card:"A04"},{kind:"shakable",card:"R04"},{kind:"shakable",card:"J040"},{kind:"shakable",card:"J041"},{kind:"shakable",card:"A05"},{kind:"shakable",card:"R05"},{kind:"shakable",card:"J050"},{kind:"shakable",card:"J051"},{kind:"shakable",card:"A06"},{kind:"shakable",card:"R06"},{kind:"shakable",card:"J060"},{kind:"shakable",card:"J061"},{kind:"shakable",card:"A07"},{kind:"shakable",card:"R07"},{kind:"shakable",card:"J070"},{kind:"shakable",card:"J071"},{kind:"shakable",card:"B08"},{kind:"shakable",card:"A08"},{kind:"shakable",card:"J080"},{kind:"shakable",card:"J081"},{kind:"shakable",card:"A09"},{kind:"shakable",card:"R09"},{kind:"shakable",card:"J090"},{kind:"shakable",card:"J091"},{kind:"shakable",card:"A10"},{kind:"shakable",card:"R10"},{kind:"shakable",card:"J100"},{kind:"shakable",card:"J101"},{kind:"shakable",card:"B11"},{kind:"shakable",card:"J110"},{kind:"shakable",card:"J111"},{kind:"shakable",card:"J112"},{kind:"shakable",card:"B12"},{kind:"shakable",card:"A12"},{kind:"shakable",card:"R12"},{kind:"shakable",card:"J120"},{kind:"shaking",option:!1},{kind:"shaking",option:!0},{kind:"select match",match:"B01"},{kind:"select match",match:"R01"},{kind:"select match",match:"J010"},{kind:"select match",match:"J011"},{kind:"select match",match:"A02"},{kind:"select match",match:"R02"},{kind:"select match",match:"J020"},{kind:"select match",match:"J021"},{kind:"select match",match:"B03"},{kind:"select match",match:"R03"},{kind:"select match",match:"J030"},{kind:"select match",match:"J031"},{kind:"select match",match:"A04"},{kind:"select match",match:"R04"},{kind:"select match",match:"J040"},{kind:"select match",match:"J041"},{kind:"select match",match:"A05"},{kind:"select match",match:"R05"},{kind:"select match",match:"J050"},{kind:"select match",match:"J051"},{kind:"select match",match:"A06"},{kind:"select match",match:"R06"},{kind:"select match",match:"J060"},{kind:"select match",match:"J061"},{kind:"select match",match:"A07"},{kind:"select match",match:"R07"},{kind:"select match",match:"J070"},{kind:"select match",match:"J071"},{kind:"select match",match:"B08"},{kind:"select match",match:"A08"},{kind:"select match",match:"J080"},{kind:"select match",match:"J081"},{kind:"select match",match:"A09"},{kind:"select match",match:"R09"},{kind:"select match",match:"J090"},{kind:"select match",match:"J091"},{kind:"select match",match:"A10"},{kind:"select match",match:"R10"},{kind:"select match",match:"J100"},{kind:"select match",match:"J101"},{kind:"select match",match:"B11"},{kind:"select match",match:"J110"},{kind:"select match",match:"J111"},{kind:"select match",match:"J112"},{kind:"select match",match:"B12"},{kind:"select match",match:"A12"},{kind:"select match",match:"R12"},{kind:"select match",match:"J120"},{kind:"four of a month",option:!1},{kind:"four of a month",option:!0},{kind:"move animal 9",option:!1},{kind:"move animal 9",option:!0},{kind:"go",option:!1},{kind:"go",option:!0}];function U(e){return"/images/cards/".concat(e.startsWith("?")?"hidden":e.startsWith("*")?"bomb":e.startsWith("+")?"bonus".concat(e[1]):e,".png")}function Y(e){if(e.startsWith("B"))return"".concat(parseInt(e.substring(1)),"\uc6d4 \uad11");if(e.startsWith("A"))return"".concat(parseInt(e.substring(1)),"\uc6d4 \uc5f4\ub057");if(e.startsWith("R")){var t=parseInt(e.substring(1)),a=[1,2,3].includes(t)?"\ud64d":[4,5,7].includes(t)?"\ucd08":[6,9,10].includes(t)?"\uccad":null;return"".concat(t,"\uc6d4 \ub760").concat(a?" (".concat(a,"\ub2e8)"):"")}if(e.startsWith("J")){var n=parseInt(e.substring(1,3)),r=parseInt(e.substring(3)),c=2===r||12===n?2:1;return"".concat(n,"\uc6d4 ").concat(2===c?"\uc30d":"","\ud53c").concat(2===c?"":" (".concat(r,")"))}if(e.startsWith("+")){var s=parseInt(e.substring(1));return"\ubcf4\ub108\uc2a4 ".concat(2===s?"\uc30d":"\uc4f0\ub9ac","\ud53c")}if(e.startsWith("*")){var i=parseInt(e.substring(1));return"\ud3ed\ud0c4 (".concat(i,")")}return"\uc228\uaca8\uc9c4 \ud328"}function K(e){return["January","February","March","April","May","June","July","August","September","October","November","December"][e-1]}function V(e,t,a){if(a)return e.board.hands[t];var n=e.board.hands[t].length,r=e.board.hands[t].filter((function(a){return a.startsWith("*")||e.state.shaking_histories[t].flat().includes(a)}));return[].concat(Object(u.a)(r),Object(u.a)(Array(n-r.length).fill("?")))}function X(e){switch(e.kind){case"throw":return"".concat(Y(e.card)," \ub0b4\uae30");case"throw bomb":return"\ud3ed\ud0c4 \ud328 \ub0b4\uae30";case"bomb":return"".concat(e.month,"\uc6d4 \ud3ed\ud0c4 \ub0b4\uae30");case"shakable":return"".concat(Y(e.card)," \ub0b4\uae30");case"shaking":return e.option?"\ud754\ub4e4\uae30":"\ud754\ub4e4\uc9c0 \uc54a\uae30";case"select match":return"".concat(Y(e.match)," \uac00\uc838\uc624\uae30");case"four of a month":return e.option?"\ucd1d\ud1b5\uc73c\ub85c \ub05d\ub0b4\uae30":"\ucd1d\ud1b5\uc73c\ub85c \ub05d\ub0b4\uc9c0 \uc54a\uae30";case"move animal 9":return e.option?"9\uc6d4 \uc5f4\ub057 \uc30d\ud53c\ub85c \uc4f0\uae30":"9\uc6d4 \uc5f4\ub057 \uadf8\ub300\ub85c \uc5f4\ub057\uc73c\ub85c \uc4f0\uae30";case"go":return e.option?"\uace0":"\uc2a4\ud1b1"}}function q(e){switch(e.kind){case"throw":return"throw ".concat(Y(e.card));case"throw bomb":return"throw a bomb card";case"bomb":return"throw a bomb of ".concat(K(e.month));case"shakable":return"throw ".concat(Y(e.card));case"shaking":return e.option?"shake":"don't shake";case"select match":return"select ".concat(Y(e.match));case"four of a month":return e.option?"end the game by a four-of-a-month":"don't end the game by a four-of-a-month";case"move animal 9":return e.option?"use the animal of September as a double junk":"use the animal of September as an animal";case"go":return e.option?"go":"stop"}}function Q(e){return e.charAt(0).toUpperCase()+e.slice(1)}a(173);var Z=function(e){var t,a=e.card,r=void 0===a?"?":a,c=e.anchorBottom,s=void 0!==c&&c,o=e.hoverEnabled,l=void 0===o||o,d=e.title,u=(e.children,Object(I.a)(e,["card","anchorBottom","hoverEnabled","title","children"]));return Object(n.jsx)("button",Object(i.a)(Object(i.a)({},u),{},{className:"".concat(l?"card-button":""," ").concat(null!==(t=e.className)&&void 0!==t?t:""," ").concat(s?"anchor-bottom":""," ").concat(l?"":"cursor-default"),children:Object(n.jsx)("img",{title:d,alt:d,src:U(r),className:"w-full h-full",style:{borderRadius:4}})}))},$={xs:"text-xs",sm:"text-sm",base:"text-base",lg:"text-lg",xl:"text-xl","2xl":"text-2xl"},ee=function(e){var t,a=e.size,r=void 0===a?"base":a,c=e.dark,s=void 0!==c&&c,o=Object(I.a)(e,["size","dark"]);return Object(n.jsx)("button",Object(i.a)(Object(i.a)({},o),{},{className:"flex items-center justify-center px-5 py-3 rounded-full\n        disabled:bg-transparent disabled:opacity-50 disabled:cursor-not-allowed \n        focus:outline-none focus:shadow-outline ".concat($[r]," ").concat(null!==(t=e.className)&&void 0!==t?t:""," ").concat(s?"text-white bg-opacity-15 hover:bg-opacity-35 bg-white":"bg-opacity-25 hover:bg-opacity-50 text-gray-800 bg-gray-400")}))},te=function(e){var t=e.game,a=e.player,r=e.clientId,c=e.roomId,s=e.updateGame,i=e.history,o=!!r&&t.players.includes(r),h=Object(G.useToasts)().addToast,m=Object(L.a)().t;return Object(n.jsx)("div",{className:"w-full h-full flex place-items-center fixed z-10 top-0 left-0",style:{backgroundColor:"rgba(0, 0, 0, 0.45)"},children:Object(n.jsxs)("div",{className:"p-8 bg-white rounded-2xl w-2/3 text-center m-auto",children:[Object(n.jsx)("h2",{className:"font-black text-3xl text-gray-800 mb-3",children:null===t.state.winner?"\ud83e\udd14 ".concat(Q(m("push back"))):t.state.winner===a?"\ud83c\udf1f ".concat(Q(m("victory")),"!"):1-t.state.winner===a?"\ud83d\ude25 ".concat(Q(m("defeat")),"..."):"\ud83c\udfc6 ".concat(t.players[t.state.winner]).concat(m("'s")," ").concat(Q(m("victory")),"!")}),Object(n.jsx)("p",{children:Object(n.jsx)("span",{className:"text-xl text-gray-800",children:null===t.state.winner?null:Object(n.jsxs)(n.Fragment,{children:["".concat(Q(m("total"))," "),Object(n.jsx)("span",{className:"font-bold",children:t.state.scores[t.state.winner]}),"".concat(m("points"))]})})}),Object(n.jsx)("p",{children:Object(n.jsx)("span",{className:"text-md text-gray-800",children:null===t.state.winner?null:[{kind:"go-add",arg:t.state.go_histories[t.state.winner].length}].concat(Object(u.a)(t.state.score_factors[t.state.winner])).map((function(e){return"go-add"===e.kind?0===e.arg?null:"".concat(Q(m("go"))," ").concat(e.arg).concat(m("points")):"go"===e.kind?e.arg<=2?null:"".concat(Q(m("go"))," ").concat(Math.pow(2,e.arg-2)).concat(m("multiples")):"bright"===e.kind?0===e.arg?null:"".concat(Q(m("brights"))," ").concat(e.arg).concat(m("points")):"animal"===e.kind?e.arg<5?null:"".concat(Q(m("animals"))," ").concat(e.arg-4).concat(m("points")):"ribbon"===e.kind?e.arg<5?null:"".concat(Q(m("ribbons"))," ").concat(e.arg-4).concat(m("points")):"junk"===e.kind?e.arg<10?null:"".concat(Q(m("junks"))," ").concat(e.arg-9).concat(m("points")):"five birds"===e.kind?"".concat(Q(m("five birds"))," 5").concat(m("points")):"red ribbons"===e.kind?"".concat(Q(m("red ribbons"))," 3").concat(m("points")):"blue ribbons"===e.kind?"".concat(Q(m("blue ribbons"))," 3").concat(m("points")):"plant ribbons"===e.kind?"".concat(Q(m("plant ribbons"))," 3").concat(m("points")):"shaking"===e.kind?0===e.arg?null:"".concat(Q(m("shaking"))," ").concat(Math.pow(2,e.arg)).concat(m("multiples")):"bright penalty"===e.kind?"".concat(Q(m("bright penalty"))," 2").concat(m("multiples")):"animal penalty"===e.kind?"".concat(Q(m("animal penalty"))," 2").concat(m("multiples")):"junk penalty"===e.kind?"".concat(Q(m("junk penalty"))," 2").concat(m("multiples")):"go penalty"===e.kind?"".concat(Q(m("go penalty"))," 2").concat(m("multiples")):"four of a month"===e.kind?"".concat(Q(m("four of a month"))," 10").concat(m("points")):"".concat(Q(m("three stackings"))," 10").concat(m("points"))})).filter((function(e){return null!==e})).join(", ")})}),Object(n.jsx)("div",{children:o?Object(n.jsxs)("div",{className:"flex",children:[Object(n.jsx)(ee,{className:"m-auto mt-4",onClick:Object(d.a)(l.a.mark((function e(){var t,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(k){e.next=2;break}return e.abrupt("return");case 2:if(r){e.next=4;break}return e.abrupt("return");case 4:return s(null),g("end game",{client:r}),e.next=8,v("end game response");case 8:if((t=e.sent).success){e.next=12;break}return h(t.error,{appearance:"error",autoDismiss:!0}),e.abrupt("return");case 12:return g("start game",{client:r}),e.next=15,v("start game response");case 15:(a=e.sent).success||h(a.error,{appearance:"error",autoDismiss:!0});case 17:case"end":return e.stop()}}),e)}))),children:Q(m("new games"))}),Object(n.jsx)(ee,{className:"m-auto mt-4",onClick:Object(d.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(k){e.next=2;break}return e.abrupt("return");case 2:if(r){e.next=4;break}return e.abrupt("return");case 4:if(c){e.next=6;break}return e.abrupt("return");case 6:return s(null),g("end game",{client:r}),e.next=10,v("end game response");case 10:if((t=e.sent).success){e.next=14;break}return h(t.error,{appearance:"error",autoDismiss:!0}),e.abrupt("return");case 14:i&&i.push("/rooms/".concat(c));case 15:case"end":return e.stop()}}),e)}))),children:Q(m("return to room"))})]}):null})]})})},ae=function(e){var t=e.peep,a=e.game,c=e.player,s=e.clientId,i=Object(L.a)(),o=i.t,l=i.i18n,d=1258,u=1327+(null===c?-53:0),h=function(){var e=Object(r.useState)({width:32,height:32}),t=Object(T.a)(e,2),a=t[0],n=t[1];return Object(r.useEffect)((function(){function e(){n({width:window.innerWidth,height:window.innerHeight})}return window.addEventListener("resize",e),e(),function(){return window.removeEventListener("resize",e)}}),[]),a}(),m=Math.min((h.width-32)/d,(h.height-112)/u),b=null!==c&&void 0!==c?c:1,j=0===b?1:0;return Object(n.jsxs)("div",{className:"m-auto",style:{width:m*d+32,height:m*u+32,padding:16},children:[t&&Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)("div",{className:"fixed right-0 top-0 text-xs overflow-y-auto z-20 bg-white text-white bg-opacity-25 p-4 rounded-xl",style:{height:"10rem",width:"15rem",top:"5rem",left:"1rem"},children:Object(n.jsx)("pre",{className:"break-all whitespace-pre-wrap",children:!!a.estimate&&a.estimate[0].map((function(e,t){return[("ko"===l.language?X:q)(P[t]),e]})).filter((function(e){var t=Object(T.a)(e,2);return t[0],0!==t[1]})).sort((function(e,t){return t[1]-e[1]})).slice(0,5).map((function(e,t){var a=Object(T.a)(e,2),n=a[0],r=a[1];return"".concat(t,". ").concat(n," (").concat(r.toFixed(4),")")})).join("\n")})}),Object(n.jsxs)("div",{className:"fixed text-center text-white",style:{marginTop:48*-m,fontSize:28*m,width:"calc(100% - 32px)",maxWidth:m*d},children:[o("Estimated score"),": ",a.estimate?a.estimate[1]:"-"]})]}),Object(n.jsx)(se,{ratio:m,hand:V(a,j,t),clientId:s,turn:a.state.player===j}),Object(n.jsx)("div",{style:{height:32*m}}),Object(n.jsxs)("div",{className:"flex justify-center",style:{height:189*m},children:[Object(n.jsx)(ne,{ratio:m,name:a.players[j]}),Object(n.jsx)(ie,{captureField:a.board.capture_fields[j],animal9Moved:a.state.animal_9_moved,ratio:m}),Object(n.jsx)(re,{ratio:m,score:a.state.scores[j],go:a.state.go_histories[j].length,stacking:a.state.stacking_histories[j].length,shaking:a.state.shaking_histories[j].length})]}),Object(n.jsx)("div",{style:{height:96*m}}),Object(n.jsx)(le,{centerField:a.board.center_field,ratio:m}),Object(n.jsx)("div",{style:{height:96*m}}),Object(n.jsxs)("div",{className:"flex justify-center",style:{height:189*m},children:[Object(n.jsx)(ne,{ratio:m,name:a.players[b]}),Object(n.jsx)(ie,{captureField:a.board.capture_fields[b],animal9Moved:a.state.animal_9_moved,ratio:m}),Object(n.jsx)(re,{ratio:m,score:a.state.scores[b],go:a.state.go_histories[b].length,stacking:a.state.stacking_histories[b].length,shaking:a.state.shaking_histories[b].length})]}),Object(n.jsx)("div",{style:{height:32*m}}),Object(n.jsx)(se,{ratio:m,hand:null!==c?a.board.hands[b]:V(a,b,t),mine:null!==c,actions:a.state.player===c?a.actions:[],clientId:s,turn:a.state.player===b})]})},ne=function(e){var t=e.ratio,a=e.name,r=Object(L.a)().t,c="Wyi2TSh8fW3jioGOkjpiNHHKImPntB"===a?"AlphaGoStop":a,s="Wyi2TSh8fW3jioGOkjpiNHHKImPntB"===a?"/images/ai_image.jpg":"https://i1.wp.com/similarpng.com/wp-content/plugins/userswp/assets/images/no_profile.png";return Object(n.jsxs)("div",{style:{width:106*t,marginRight:40*t,height:90*t*1.618,fontSize:24*t,padding:8*t,lineHeight:1.1,borderRadius:8*t,backgroundColor:"#29604D",textAlign:"center",position:"relative"},className:"text-white",children:[Object(n.jsx)("div",{style:{height:90*t,backgroundColor:"white",borderRadius:8*t},children:Object(n.jsx)("img",{src:s,style:{width:90*t,height:90*t,borderRadius:8*t},className:"object-cover object-center",alt:"".concat(c).concat(r("'s")," ").concat(r("profile image"))})}),Object(n.jsx)("div",{style:{position:"absolute",bottom:8*t,width:90*t},className:"truncate",children:c})]})},re=function(e){var t=e.ratio,a=e.score,r=e.go,c=e.stacking,s=e.shaking,i=Object(L.a)().t;return Object(n.jsxs)("div",{style:{width:106*t,marginLeft:40*t,height:90*t*1.618,fontSize:24*t,padding:8*t,lineHeight:1.1,borderRadius:8*t,backgroundColor:"#29604D",fontFamily:"sans-serif",textAlign:"left"},className:"text-white",children:[Object(n.jsxs)("div",{style:{fontSize:a>99999?"1em":a>9999?"1.1em":"1.3em",textAlign:"center",lineHeight:"".concat(48*t,"px"),whiteSpace:"nowrap",width:"min-content",marginLeft:"50%",transform:"translateX(-50%)",padding:"0 ".concat(8*t,"px"),borderRadius:8*t},className:"font-bold text-right",children:[a,i("pt")]}),Object(n.jsxs)("div",{style:{marginLeft:15*t,width:60*t},children:["\ud83d\udd25 ",Object(n.jsx)("span",{className:"font-black float-right",children:r})]}),Object(n.jsxs)("div",{style:{marginLeft:15*t,width:60*t},children:["\ud83d\udca9 ",Object(n.jsx)("span",{className:"font-black float-right",children:c})]}),Object(n.jsxs)("div",{style:{marginLeft:15*t,width:60*t},children:["\ud83d\udd14 ",Object(n.jsx)("span",{className:"font-black float-right",children:s})]})]})},ce=function(e){var t=e.card,a=e.width,r=e.height,c=e.alt,s=e.title,o=e.style,l=void 0===o?{}:o,d=e.className,u=e.onClick,h=a||r?!a&&r?{width:68/105*r,height:r}:a&&!r?{width:a,height:105*a/68}:{width:a,height:r}:{width:68,height:105},m=h.width,b=h.height;return Object(n.jsx)("img",{src:U(t),style:Object(i.a)({width:m,height:b,objectPosition:"center",objectFit:"cover"},l),alt:null!==c&&void 0!==c?c:Y(t),title:s,className:d,onClick:u})},se=function(e){var t=e.hand,a=e.mine,r=void 0!==a&&a,c=e.actions,s=void 0===c?[]:c,o=e.ratio,u=e.style,h=void 0===u?{}:u,m=e.turn,b=e.clientId,j=Object(G.useToasts)().addToast,p=Object(L.a)().t,f=r?100*o:68*o,x=r?154*o:105*o,g=r?12*o:8*o;return Object(n.jsxs)("div",{className:"flex w-full place-content-center",children:[Object(n.jsx)("div",{style:{width:r?54*o:40*o,height:x+2*g,lineHeight:1},className:"flex items-center",children:m&&t.length>0&&Object(n.jsx)(M.a,{size:r?40*o:32*o,color:"white"})}),Object(n.jsx)("div",{className:"flex",style:Object(i.a)({padding:g/2,backgroundColor:0===t.length?"transparent":"#29604D",borderRadius:8*o,marginRight:r?54*o:40*o,minWidth:16*o+2*g,height:x+2*g},h),children:t.map((function(e,t){var a=r?s.find((function(t){return"throw"===t.kind&&t.card===e||"throw bomb"===t.kind&&e.startsWith("*")||"bomb"===t.kind&&["B","A","R","J"].includes(e[0])&&t.month===parseInt(e.substring(1,3),10)||"shakable"===t.kind&&t.card===e})):void 0,c=a?"throw"===a.kind?Q(p("throw the card",{card:e})):"throw bomb"===a.kind?Q(p("throw a bomb card")):"bomb"===a.kind?Q(p("throw a bomb of",{month:a.month})):Q(p("shake with",{card:e,month:e.substring(1,3)})):void 0;return Object(n.jsx)(Z,{card:e,style:{width:f,margin:g/2,borderRadius:4*o},title:c,hoverEnabled:r,anchorBottom:!0,className:r?0===s.length?"cursor-not-allowed":"cursor-pointer":"",onClick:r?Object(d.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a){e.next=2;break}return e.abrupt("return");case 2:return k.emit("play",{client:b,action:a}),e.next=5,v("play response");case 5:(t=e.sent).success||j(t.error,{appearance:"error",autoDismiss:!0});case 7:case"end":return e.stop()}}),e)}))):void 0},t)}))})]})},ie=function(e){var t=e.captureField,a=e.animal9Moved,r=e.ratio,c=(e.style,t.filter((function(e){return e.startsWith("B")}))),s=t.filter((function(e){return e.startsWith("A")&&(!a||"A09"!==e)})),i=s.includes("A02")&&s.includes("A04")&&s.includes("A08"),o=Math.max(s.length-4,0)+(i?5:0),l=t.filter((function(e){return e.startsWith("R")})),d=l.includes("R01")&&l.includes("R02")&&l.includes("R03"),u=l.includes("R04")&&l.includes("R05")&&l.includes("R07"),h=l.includes("R06")&&l.includes("R09")&&l.includes("R10"),m=Math.max(l.length-4,0)+(h?3:0)+(u?3:0)+(d?3:0),b=t.filter((function(e){return e.startsWith("J")||e.startsWith("+")||!!a&&"A09"===e})),j=b.map((function(e){return e.startsWith("J")?"J110"===e||"J111"===e?1:"J120"===e||"J112"===e?2:1:"A09"===e||"+2"===e?2:"+3"===e?3:0})).reduce((function(e,t){return e+t}),0);return Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)(oe,{pile:c,sizeOfChunk:5,ratio:r,style:{marginRight:40*r},number:c.length<3?c.length:5===c.length?15:4===c.length?4:c.includes("B12")?2:3,isScore:c.length>=3}),Object(n.jsx)(oe,{pile:s,ratio:r,style:{marginRight:40*r},number:o>0?o:s.length,isScore:o>0}),Object(n.jsx)(oe,{pile:l,ratio:r,style:{marginRight:40*r},number:m>0?m:l.length,isScore:m>0}),Object(n.jsx)(oe,{pile:b,sizeOfChunk:8,ratio:r,style:{marginRight:40*r},number:j>9?j-9:j,isScore:j>9})]})},oe=function(e){var t=e.pile,a=e.ratio,r=e.number,c=e.isScore,s=e.sizeOfChunk,o=void 0===s?3:s,l=e.style,d=void 0===l?{}:l,u=68*a,h=105*a,m=24*a,b=28*a,j=Math.ceil(t.length/o),p=u+(o-1)*m,f=h+(j-1)*b,x=t.length-1;return Object(n.jsxs)("div",{style:Object(i.a)({width:p,height:f,position:"relative"},d),children:[t.map((function(e,t){return Object(n.jsx)(ce,{card:e,width:u,style:{position:"absolute",left:t%o*m,top:Math.floor(t/o)*b,borderRadius:4*a}},t)})),0===t.length?null:Object(n.jsx)("div",{className:"absolute",style:{width:40*a,height:40*a,left:x%o*m+u-40*a,top:Math.floor(x/o)*b+h-40*a,backgroundColor:"white",border:"".concat(4*a,"px solid ").concat(c?"#262C34":"#4f5257"),color:c?"#262C34":"#65676b",fontWeight:c?"bold":"normal",borderRadius:8*a,fontSize:28*a,lineHeight:"".concat(32*a,"px"),textAlign:"center"},children:r})]})},le=function(e){var t=e.centerField,a=e.ratio,r=e.style,c=void 0===r?{}:r;return Object(n.jsxs)("div",{className:"flex",style:Object(i.a)({height:392*a},c),children:[Object(n.jsxs)("div",{className:"flex flex-wrap justify-between",style:{height:446*a,width:428*a},children:[Object(n.jsx)(de,{field:t[1],ratio:a}),Object(n.jsx)(de,{field:t[2],ratio:a}),Object(n.jsx)(de,{field:t[3],ratio:a}),Object(n.jsx)(de,{field:t[7],ratio:a}),Object(n.jsx)(de,{field:t[8],ratio:a}),Object(n.jsx)(de,{field:t[9],ratio:a})]}),Object(n.jsx)("div",{className:"flex justify-center items-center",style:{height:392*a,width:290*a},children:Object(n.jsx)(ce,{card:"?",width:90*a,style:{borderRadius:8*a}})}),Object(n.jsxs)("div",{className:"flex flex-wrap justify-between",style:{height:446*a,width:428*a},children:[Object(n.jsx)(de,{field:t[4],ratio:a}),Object(n.jsx)(de,{field:t[5],ratio:a}),Object(n.jsx)(de,{field:t[6],ratio:a}),Object(n.jsx)(de,{field:t[10],ratio:a}),Object(n.jsx)(de,{field:t[11],ratio:a}),Object(n.jsx)(de,{field:t[12],ratio:a})]})]})},de=function(e){var t=e.field,a=void 0===t?[]:t,r=e.ratio,c=(e.style,a.length<=3?1:4===a.length?2/3:.5);return Object(n.jsx)("div",{className:"relative",style:{height:180*r,width:122*r},children:a.map((function(e,t){return Object(n.jsx)(ce,{card:e,width:90*r,style:{position:"absolute",top:20*t*c*r,left:16*t*c*r,borderRadius:8*r}},t)}))})},ue=function(e){var t=e.peep,a=e.game,r=e.player,c=e.clientId,s=e.roomId,o=e.updateGame,l=Object(I.a)(e,["peep","game","player","clientId","roomId","updateGame"]);return Object(n.jsxs)("div",{className:"w-full h-full flex place-items-center",style:{backgroundColor:"#3B7157"},children:[Object(n.jsx)(ae,{peep:t,game:a,player:r,clientId:c}),a.state.ended?Object(n.jsx)(te,Object(i.a)({game:a,player:r,clientId:c,updateGame:o,roomId:s},l)):null]})},he=Object(b.connect)((function(e){return e}),f)((function(e){var t,a=e.id,c=e.updateGame,s=e.game,o=e.clientId,u=e.rooms,h=e.roomId,m=Object(I.a)(e,["id","updateGame","game","clientId","rooms","roomId"]),b=Object(G.useToasts)().addToast;Object(r.useEffect)((function(){var e=function(e){e.success&&c(e.result)};return g("spectate game",{room:a}),y("spectate game response",e),function(){return N("spectate game response",e)}}),[a,c]);var j=Object(L.a)(),f=j.t,x=j.i18n,O=s&&s.players[s.state.player]===o,w=Object(r.useState)(!1),R=Object(T.a)(w,2),D=R[0],S=R[1],B=Object(r.useState)(!1),z=Object(T.a)(B,2),F=z[0],M=z[1],P=Object(r.useState)(null),U=Object(T.a)(P,2),Y=U[0],K=U[1],V=Object(r.useState)(!1),X=Object(T.a)(V,2),q=X[0],$=X[1];p()(Object(d.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(k){e.next=2;break}return e.abrupt("return");case 2:if(s){e.next=4;break}return e.abrupt("return");case 4:if(O){e.next=6;break}return e.abrupt("return");case 6:if(Object.values(s.flags).some((function(e){return e}))){e.next=8;break}return e.abrupt("return");case 8:s.flags.go?(M(!0),K(Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)("h2",{className:"font-black text-xl text-gray-800 mb-3",children:f("Declare Go?")}),Object(n.jsxs)("div",{className:"flex justify-center",children:[Object(n.jsx)(ee,{style:{minWidth:"3em",marginRight:"2em"},onClick:Object(d.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return g("play",{client:o,action:{kind:"go",option:!0}}),M(!1),e.next=4,v("play response");case 4:(t=e.sent).success?c(t.result):(M(!0),b(t.error,{appearance:"error",autoDismiss:!0}));case 6:case"end":return e.stop()}}),e)}))),children:Object(n.jsx)("span",{children:Q(f("go"))})}),Object(n.jsx)(ee,{onClick:Object(d.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return g("play",{client:o,action:{kind:"go",option:!1}}),M(!1),e.next=4,v("play response");case 4:(t=e.sent).success?c(t.result):(M(!0),b(t.error,{appearance:"error",autoDismiss:!0}));case 6:case"end":return e.stop()}}),e)}))),children:Object(n.jsx)("span",{children:Q(f("stop"))})})]})]}))):s.flags.shaking?(M(!0),K(Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)("h2",{className:"font-black text-xl text-gray-800 mb-3",children:f("Shake cards?")}),Object(n.jsx)("div",{style:{maxWidth:"calc(80% + 2em)",margin:"auto",marginTop:"2em"},children:Object(n.jsx)("div",{className:"flex justify-between",style:{maxWidth:"14em",margin:"auto"},children:s.state.shaking[1].map((function(e){return Object(n.jsx)(Z,{card:e,hoverEnabled:!1,style:{maxWidth:"4em",width:"30%",cursor:"default"}},e)}))})}),Object(n.jsxs)("div",{className:"flex justify-center mt-4",children:[Object(n.jsx)(ee,{style:{minWidth:"3em",marginRight:"2em"},onClick:Object(d.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return g("play",{client:o,action:{kind:"shaking",option:!0}}),M(!1),e.next=4,v("play response");case 4:(t=e.sent).success?c(t.result):(M(!0),b(t.error,{appearance:"error",autoDismiss:!0}));case 6:case"end":return e.stop()}}),e)}))),children:Object(n.jsx)("span",{children:Q(f("yes"))})}),Object(n.jsx)(ee,{style:{minWidth:"3em"},onClick:Object(d.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return g("play",{client:o,action:{kind:"shaking",option:!1}}),M(!1),e.next=4,v("play response");case 4:(t=e.sent).success?c(t.result):(M(!0),b(t.error,{appearance:"error",autoDismiss:!0}));case 6:case"end":return e.stop()}}),e)}))),children:Object(n.jsx)("span",{children:Q(f("no"))})})]})]}))):s.flags.select_match?(M(!0),K(Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)("h2",{className:"font-black text-xl text-gray-800 mb-3",children:f("Please Choose a Card to Capture.")}),Object(n.jsx)("div",{style:{maxWidth:"calc(80% + 2em)",margin:"auto",marginTop:"2em"},children:Object(n.jsxs)("div",{className:"flex justify-between",style:{maxWidth:"14em",margin:"auto"},children:[Object(n.jsx)(Z,{card:s.actions[0].match,style:{maxWidth:"6em",width:"40%"},onClick:Object(d.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return g("play",{client:o,action:{kind:"select match",match:s.actions[0].match}}),M(!1),e.next=4,v("play response");case 4:(t=e.sent).success?c(t.result):(M(!0),b(t.error,{appearance:"error",autoDismiss:!0}));case 6:case"end":return e.stop()}}),e)})))}),Object(n.jsx)(Z,{card:s.actions[1].match,style:{maxWidth:"6em",width:"40%"},onClick:Object(d.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return g("play",{client:o,action:{kind:"select match",match:s.actions[1].match}}),M(!1),e.next=4,v("play response");case 4:(t=e.sent).success?c(t.result):(M(!0),b(t.error,{appearance:"error",autoDismiss:!0}));case 6:case"end":return e.stop()}}),e)})))})]})})]}))):s.flags.move_animal_9?(M(!0),K(Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)("h2",{className:"font-black text-xl text-gray-800 mb-3",children:f("Use Animal of September As a Double Junk?")}),Object(n.jsxs)("div",{className:"flex justify-center",children:[Object(n.jsx)(ee,{style:{minWidth:"3em",marginRight:"2em"},onClick:Object(d.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return g("play",{client:o,action:{kind:"move animal 9",option:!0}}),M(!1),e.next=4,v("play response");case 4:(t=e.sent).success?c(t.result):(M(!0),b(t.error,{appearance:"error",autoDismiss:!0}));case 6:case"end":return e.stop()}}),e)}))),children:Object(n.jsx)("span",{children:Q(f("yes"))})}),Object(n.jsx)(ee,{style:{minWidth:"3em"},onClick:Object(d.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return g("play",{client:o,action:{kind:"move animal 9",option:!1}}),M(!1),e.next=4,v("play response");case 4:(t=e.sent).success?c(t.result):(M(!0),b(t.error,{appearance:"error",autoDismiss:!0}));case 6:case"end":return e.stop()}}),e)}))),children:Object(n.jsx)("span",{children:Q(f("no"))})})]})]}))):s.flags.four_of_a_month&&(M(!0),K(Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)("h2",{className:"font-black text-xl text-gray-800 mb-3",children:f("Finish the Game with Four-of-a-Month?")}),Object(n.jsxs)("div",{className:"flex justify-center",children:[Object(n.jsx)(ee,{style:{minWidth:"3em",marginRight:"2em"},onClick:Object(d.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return g("play",{client:o,action:{kind:"four of a month",option:!0}}),M(!1),e.next=4,v("play response");case 4:(t=e.sent).success?c(t.result):(M(!0),b(t.error,{appearance:"error",autoDismiss:!0}));case 6:case"end":return e.stop()}}),e)}))),children:Object(n.jsx)("span",{children:Q(f("yes"))})}),Object(n.jsx)(ee,{style:{minWidth:"3em"},onClick:Object(d.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return g("play",{client:o,action:{kind:"four of a month",option:!1}}),M(!1),e.next=4,v("play response");case 4:(t=e.sent).success?c(t.result):(M(!0),b(t.error,{appearance:"error",autoDismiss:!0}));case 6:case"end":return e.stop()}}),e)}))),children:Object(n.jsx)("span",{children:Q(f("no"))})})]})]})));case 9:case"end":return e.stop()}}),e)}))),[k,s,c]);var te=null===s||void 0===s?void 0:s.players.findIndex((function(e){return e===o})),ae=!!o&&(null===s||void 0===s?void 0:s.players.includes(o));return null===s?Object(n.jsx)("div",{className:"w-full h-full",children:Object(n.jsx)(J.BlockLoading,{})}):Object(n.jsxs)("div",{className:"w-full h-full relative",style:{backgroundColor:"#3B7157"},children:[Object(n.jsx)(W,{style:{position:"relative",height:"2em",zIndex:20},children:Object(n.jsxs)("div",{className:"flex justify-between",children:[Object(n.jsx)("div",{children:ae&&Object(n.jsx)(ee,{dark:!0,size:"sm",onClick:Object(d.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(k){e.next=2;break}return e.abrupt("return");case 2:if(o){e.next=4;break}return e.abrupt("return");case 4:return k.emit("end game",{client:o}),e.next=7,v("end game response");case 7:(t=e.sent).success||b(t.error,{appearance:"error",autoDismiss:!0});case 9:case"end":return e.stop()}}),e)}))),children:"End Game"})}),Object(n.jsxs)("div",{className:"flex",children:[!!u&&(null===(t=u.find((function(e){return e.id===m.match.params.roomId})))||void 0===t?void 0:t.singlePlayer)&&Object(n.jsx)(C,{className:"mr-3",onClick:function(){$((function(e){return!e}))},children:q?Object(n.jsx)(H.a,{color:"rgba(255, 255, 255, 0.9)"}):Object(n.jsx)(H.b,{color:"rgba(255, 255, 255, 0.9)"})}),Object(n.jsx)(C,{className:"mr-3",onClick:function(){S((function(e){return!e}))},children:D?Object(n.jsx)(_.a,{color:"rgba(255, 255, 255, 0.9)"}):Object(n.jsx)(E.a,{color:"rgba(255, 255, 255, 0.9)"})}),Object(n.jsx)(C,{className:"mr-3",onClick:function(){x.changeLanguage("ko"!==x.language?"ko":"en")},children:Object(n.jsx)(_.b,{color:"rgba(255, 255, 255, 0.9)"})}),Object(n.jsx)(C,{onClick:function(){var e,t={board:(e=s).board,flags:e.flags,state:e.state},a="data:text/json;charset=utf-8,"+encodeURIComponent(JSON.stringify(t)),n=document.createElement("a");n.setAttribute("href",a),n.setAttribute("download","game_".concat((new Date).toISOString(),".json")),document.body.appendChild(n),n.click(),n.remove()},children:Object(n.jsx)(A.d,{color:"rgba(255, 255, 255, 0.9)"})})]})]})}),Object(n.jsxs)("div",{className:"w-full absolute bottom-0",style:{height:"calc(100% - 5em)"},children:[D&&Object(n.jsx)("div",{className:"fixed right-0 top-0 text-xs overflow-y-auto z-20 bg-white text-white bg-opacity-25 p-4 rounded-xl",style:{height:"10rem",width:"28rem",top:"5rem",right:"1rem"},children:Object(n.jsx)("pre",{className:"break-all whitespace-pre-wrap",children:s.logs.join("\n")})}),Object(n.jsx)(ue,Object(i.a)({peep:q,game:s,player:-1===te?null:te,clientId:o,roomId:h,updateGame:c},m)),F&&Object(n.jsx)("div",{className:"w-full h-full flex place-items-center fixed z-10 top-0 left-0",style:{backgroundColor:"rgba(0, 0, 0, 0.45)"},children:Object(n.jsx)("div",{className:"p-8 bg-white rounded-2xl w-2/3 text-center m-auto",children:Y})})]})]})})),me=Object(b.connect)((function(e){return e}),f)((function(e){var t,a=e.match,r=e.rooms,c=e.clientId,s=e.updateClientId,i=e.roomId,o=e.updateRoomId,u=e.history,h=e.location,b=Object(G.useToasts)().addToast,j=null!==(t=null===r||void 0===r?void 0:r.find((function(e){return e.id===a.params.roomId})))&&void 0!==t?t:null;return null===r?Object(n.jsx)(S,{children:Object(n.jsx)(J.BlockLoading,{})}):j?j.gameStarted?Object(n.jsx)(he,{id:a.params.roomId,history:u,match:a,location:h}):Object(n.jsxs)(S,{children:[Object(n.jsx)(W,{children:Object(n.jsxs)("div",{className:"flex",children:[Object(n.jsx)(C,{className:"mr-4",onClick:function(){return u.push("/")},children:Object(n.jsx)(A.a,{})}),Object(n.jsx)(B,{className:"w-64 my-1",placeholder:"Client ID",value:null!==c&&void 0!==c?c:"",onChange:function(e){s(e.target.value)}}),i&&Object(n.jsx)(C,{className:"ml-4",onClick:z({history:u,clientId:c,roomId:i,rooms:r,updateRoomId:o,addToast:b},!1),children:Object(n.jsx)(A.b,{})})]})}),Object(n.jsxs)("main",{children:[Object(n.jsxs)("h2",{className:"p-4 font-bold text-3xl text-gray-800 inline-flex",children:["Room ",a.params.roomId,i===a.params.roomId&&c&&Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)(C,{onClick:Object(d.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return g("start game",{client:c}),e.next=3,v("start game response");case 3:(t=e.sent).success||b(t.error,{appearance:"error",autoDismiss:!0});case 5:case"end":return e.stop()}}),e)}))),className:"ml-4",children:Object(n.jsx)(D.a,{})}),Object(n.jsx)(C,{onClick:Object(d.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return g("exit room",{client:c}),e.next=3,v("exit room response");case 3:(t=e.sent).success?setTimeout((function(){u.replace("/")}),300):b(t.error,{appearance:"error",autoDismiss:!0});case 5:case"end":return e.stop()}}),e)}))),className:"ml-4",children:Object(n.jsx)(A.c,{})})]}),i!==a.params.roomId&&c&&Object(n.jsx)(n.Fragment,{children:Object(n.jsx)(C,{onClick:Object(d.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return g("join room",{client:c,room:a.params.roomId}),e.next=3,v("join room response");case 3:(t=e.sent).success?o(j.id):b(t.error,{appearance:"error",autoDismiss:!0});case 5:case"end":return e.stop()}}),e)}))),className:"ml-4",children:Object(n.jsx)(A.b,{})})})]}),Object(n.jsxs)(F.Wrapper,{children:[Object(n.jsx)(F.Head,{children:Object(n.jsx)(F.Row,{children:Object(n.jsx)(F.Header,{children:"Player ID"})})}),Object(n.jsx)(F.Body,{children:null===r?Object(n.jsx)(F.Row,{children:Object(n.jsx)(F.Data,{className:"w-full",colSpan:3,children:Object(n.jsx)("div",{className:"h-24 relative",children:Object(n.jsx)(J.BlockLoading,{})})})}):r.find((function(e){return e.id===a.params.roomId})).players.map((function(e){return Object(n.jsx)(F.Row,{children:Object(n.jsx)(F.Data,{className:"w-1/2",children:Object(n.jsx)("span",{className:"text-gray-700 px-6 py-3 flex items-center",children:e})})},e)}))})]})]})]}):Object(n.jsx)(m.a,{to:"/"})})),be=a(88),je=Object(b.connect)((function(e){return e}),f)((function(e){var t=e.history,a=e.clientId,r=e.roomId,c=e.rooms,s=e.updateRoomId,i=e.updateClientId,o=Object(G.useToasts)().addToast;return p()(z({history:t,clientId:a,roomId:r,rooms:c,updateRoomId:s,addToast:o},!0),[r,a,t,c,s]),Object(n.jsxs)(S,{children:[Object(n.jsx)(W,{children:Object(n.jsxs)("div",{className:"flex",children:[Object(n.jsx)(C,{className:"mr-4",onClick:function(){return t.push("/")},children:Object(n.jsx)(A.a,{})}),Object(n.jsx)(B,{className:"w-64 my-1",placeholder:"Client ID",value:null!==a&&void 0!==a?a:"",onChange:function(e){i(e.target.value)}}),r&&Object(n.jsx)(C,{className:"ml-4",onClick:z({history:t,clientId:a,roomId:r,rooms:c,updateRoomId:s,addToast:o},!1),children:Object(n.jsx)(A.b,{})})]})}),Object(n.jsxs)("main",{children:[Object(n.jsx)("h2",{className:"p-4 font-bold text-3xl text-gray-800",children:"Rooms"}),Object(n.jsxs)(F.Wrapper,{children:[Object(n.jsx)(F.Head,{children:Object(n.jsxs)(F.Row,{children:[Object(n.jsx)(F.Header,{children:"Room ID"}),Object(n.jsx)(F.Header,{children:"# of Players"}),Object(n.jsx)(F.Header,{})]})}),Object(n.jsxs)(F.Body,{children:[null===c?Object(n.jsx)(F.Row,{children:Object(n.jsx)(F.Data,{className:"w-full",colSpan:3,children:Object(n.jsx)("div",{className:"h-24 relative",children:Object(n.jsx)(J.BlockLoading,{})})})}):c.map((function(e){return Object(n.jsxs)(F.Row,{children:[Object(n.jsx)(F.Data,{className:"w-1/2",children:Object(n.jsx)("span",{className:"text-gray-700 px-6 py-3 flex items-center",children:e.id})}),Object(n.jsx)(F.Data,{className:"w-1/4",children:e.gameStarted?Object(n.jsxs)("span",{className:"text-gray-500 line-through px-6 py-3 flex items-center",children:[e.players.length,"/2"]}):Object(n.jsxs)("span",{className:"text-gray-700 px-6 py-3 flex items-center",children:[e.players.length,"/2"]})}),Object(n.jsxs)(F.Data,{className:"p-2 flex justify-end",children:[!e.gameStarted&&Object(n.jsx)(C,{className:"mr-3",onClick:Object(d.a)(l.a.mark((function n(){var c;return l.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(r!==e.id){n.next=3;break}return t.push("/rooms/".concat(e.id)),n.abrupt("return");case 3:if(!r){n.next=6;break}return o("You are already in a different room.",{appearance:"error",autoDismiss:!0}),n.abrupt("return");case 6:if(a){n.next=9;break}return o("You did not set the clientId yet.",{appearance:"error",autoDismiss:!0}),n.abrupt("return");case 9:return g("join room",{client:a,room:e.id}),n.next=12,v("join room response");case 12:(c=n.sent).success?(s(e.id),t.push("/rooms/".concat(e.id))):o(c.error,{appearance:"error",autoDismiss:!0});case 14:case"end":return n.stop()}}),n)}))),children:Object(n.jsx)(A.b,{})}),Object(n.jsx)(C,{onClick:function(){t.push("/rooms/".concat(e.id))},children:Object(n.jsx)(be.a,{})})]})]},e.id)})),Object(n.jsx)(F.Row,{children:Object(n.jsx)(F.Data,{className:"w-full",colSpan:3,children:Object(n.jsx)("div",{className:"h-24 flex items-center justify-center",children:Object(n.jsx)(ee,{onClick:Object(d.a)(l.a.mark((function e(){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!r){e.next=3;break}return o("You are already in a different room.",{appearance:"error",autoDismiss:!0}),e.abrupt("return");case 3:if(a){e.next=6;break}return o("You did not set the clientId yet.",{appearance:"error",autoDismiss:!0}),e.abrupt("return");case 6:return g("make room",{client:a}),e.next=9,v("make room response");case 9:(n=e.sent).success?(s(n.result.id),setTimeout((function(){t.push("/rooms/".concat(n.result.id))}),300)):o(n.error,{appearance:"error",autoDismiss:!0});case 11:case"end":return e.stop()}}),e)}))),children:"Make a room"})})})})]})]})]})]})}));function pe(e,t){if(!e)throw new Error(t)}var fe=Object(b.connect)((function(e){return e}),f)((function(){return Object(n.jsx)(S,{children:Object(n.jsx)("div",{className:"flex w-full h-screen text-center place-items-center place-content-center",children:Object(n.jsx)("span",{className:"text-gray-500 font-bold",style:{fontSize:"10em"},children:"\u2204"})})})})),xe=Object(b.connect)((function(e){return e}),f)((function(e){var t=e.clientId,a=e.updateClientId,c=e.updateRoomId,s=e.updateRooms,o=Object(G.useToasts)().addToast;return Object(r.useEffect)((function(){[].concat(Object(u.a)([2,4,5,6,7,8,9,10,12].map((function(e){return"A".concat(e.toString().padStart(2,"0"))}))),Object(u.a)([1,3,8,11,12].map((function(e){return"B".concat(e.toString().padStart(2,"0"))}))),Object(u.a)([1,2,3,4,5,6,7,8,9,10].map((function(e){return"J".concat(e.toString().padStart(2,"0"))})).map((function(e){return[e+"0",e+"1"]})).flat()),["J110","J111","J112","J120"],Object(u.a)([1,2,3,4,5,6,7,9,10,12].map((function(e){return"R".concat(e.toString().padStart(2,"0"))}))),["bomb","bonus2","bonus3","hidden"]).forEach((function(e){(new Image).src="/images/cards/".concat(e,".png")}))}),[]),p()(Object(d.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(k){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,v("connect response");case 4:if((t=e.sent).success)try{pe(t.message.split(" ")[1].slice(0,-1)===k.id),console.log("connected!")}catch(a){o("Socket id does not match",{appearance:"error",autoDismiss:!0})}else o(t.error,{appearance:"error",autoDismiss:!0});case 6:case"end":return e.stop()}}),e)}))),[k.connected]),Object(r.useEffect)((function(){var e;a(null!==(e=localStorage.getItem("clientId"))&&void 0!==e?e:"")}),[a]),p()(Object(d.a)(l.a.mark((function e(){var a,n,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return");case 2:return g("my room",{client:t}),e.next=5,v("my room response");case 5:(a=e.sent).success?c(null!==(n=null===(r=a.result)||void 0===r?void 0:r.id)&&void 0!==n?n:null):o(a.error,{appearance:"error",autoDismiss:!0});case 7:case"end":return e.stop()}}),e)}))),[t]),Object(r.useEffect)((function(){g("list rooms",{});var e=function(e){e.success&&s(e.result)};return y("list rooms response",e),function(){N("list rooms response",e)}}),[s]),Object(n.jsx)(h.a,{children:Object(n.jsxs)(m.d,{children:[Object(n.jsx)(m.b,{path:"/rooms/:roomId",component:me}),Object(n.jsx)(m.b,{path:"/rooms",render:function(){return Object(n.jsx)(m.a,{to:"/"})}}),Object(n.jsx)(m.b,{exact:!0,path:"/",render:function(e){return Object(n.jsx)(je,Object(i.a)({},e))}}),Object(n.jsx)(m.b,{path:"/",render:function(e){return Object(n.jsx)(fe,Object(i.a)({},e))}})]})})})),ke=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,182)).then((function(t){var a=t.getCLS,n=t.getFID,r=t.getFCP,c=t.getLCP,s=t.getTTFB;a(e),n(e),r(e),c(e),s(e)}))},ge=a(89),Oe=a.n(ge)()({clientId:null,rooms:null,roomId:null,game:null}),ve=a(62),we=a(90),ye=a(92),Ne=a(32);ve.a.use(we.a).use(ye.a).use(Ne.e).init({fallbackLng:"en",debug:!1,interpolation:{format:function(e,t,a){return"uppercase"===t?e.toUpperCase():"capitalize"===t?Q(e):"card"===t?"ko"===a?Y(e):function(e){var t=parseInt(e.substring(1,3)),a=K(t);if(e.startsWith("B"))return"bright of ".concat(a);if(e.startsWith("A"))return"animal of ".concat(a);if(e.startsWith("R")){var n=[1,2,3].includes(t)?"red":[4,5,7].includes(t)?"blue":[6,9,10].includes(t)?"plant":null;return"ribbon of ".concat(a).concat(n?" (".concat(n,")"):"")}if(e.startsWith("J")){var r=parseInt(e.substring(1,3)),c=parseInt(e.substring(3)),s=2===c||12===r?2:1;return"".concat(2===s?"double ":"","junk of ").concat(a).concat(2===s?"":" (".concat(c,")"))}if(e.startsWith("+")){var i=parseInt(e.substring(1));return"bonus card (".concat(2===i?"+2":"+3",")")}if(e.startsWith("*")){var o=parseInt(e.substring(1));return"bomb card (".concat(o,")")}return"hidden card"}(e):"month"===t?"ko"===a?"".concat(parseInt(e),"\uc6d4"):K(parseInt(e)):e},escapeValue:!1}});ve.a;s.a.render(Object(n.jsx)(b.Provider,{store:Oe,children:Object(n.jsx)(G.ToastProvider,{children:Object(n.jsx)(xe,{})})}),document.getElementById("root")),ke()}},[[180,1,2]]]);
//# sourceMappingURL=main.b8a36233.chunk.js.map